import"./CWj6FrbW.js";import"./CN51-NxK.js";import{b as de,g as zt,q as ee,i as j,u as E,j as a,v as We,c as ae,r as se,t as be,w as V,l as _e,a as J,p as ue,f as we,m as Q,e as De,k as me,s as ot,n as ce,A as Tn,a7 as A,B as Ye,z as ki,aU as yt,aW as $,bp as nt,aX as _t,b4 as Vt,o as Rt,y as bt,aT as Jn,aM as nn,d as st,M as mt,bu as $e,bn as Ei,x as Pi}from"./Cef1s1vS.js";import{i as fe}from"./D6HxSY24.js";import{p as c,l as Ie,s as At}from"./8WYl0Dy3.js";import{i as He}from"./DtBwJrag.js";import{a as Z,s as Xe,d as qt,b as zi}from"./B0aKtzpN.js";import{q as Ci,J as Qn,u as Si,a as Mi}from"./qfldb4BO.js";import{c as et,a as le,s as Je,f as rt,g as In,S as Co}from"./CepVL_7U.js";import{a as Ft}from"./D9RT3jjV.js";import{P as $n}from"./BNGCHwFp.js";import{T as Ni}from"./JXfXx3cP.js";import{H as Ti}from"./Z3_-A5vG.js";import{s as Fe,a as Ii}from"./XZMgsyez.js";import{s as it,i as On,T as gn,a as hn,t as Oi}from"./aA1VTlmX.js";import{g as So}from"./fNyk_A45.js";import{i as Hi}from"./C-V_EQOO.js";import{a as Ue}from"./C3aUuVTd.js";import{b as eo}from"./B9DZyRul.js";import{b as Hn}from"./DhQBHKPK.js";import{b as ye}from"./Bg-yF4cK.js";import{e as Dn}from"./DHQpwR2r.js";import{c as Mo}from"./CxBxmbxM.js";import{X as Di}from"./i-Im-os4.js";function Pe(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,o;n<t.length;n++)(o=Pe(t[n]))!==""&&(e+=(e&&" ")+o);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}function Ai(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ct(t,e){if(t=Ai(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Vi={passive:!1},Lt={capture:!0,passive:!1};function mn(t){t.stopImmediatePropagation()}function kt(t){t.preventDefault(),t.stopImmediatePropagation()}function No(t){var e=t.document.documentElement,n=it(t).on("dragstart.drag",kt,Lt);"onselectstart"in e?n.on("selectstart.drag",kt,Lt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function To(t,e){var n=t.document.documentElement,o=it(t).on("dragstart.drag",null);e&&(o.on("click.drag",kt,Lt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gt=t=>()=>t;function kn(t,{sourceEvent:e,subject:n,target:o,identifier:s,active:l,x:r,y:i,dx:u,dy:g,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:l,enumerable:!0,configurable:!0},x:{value:r,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:g,enumerable:!0,configurable:!0},_:{value:d}})}kn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Li(t){return!t.ctrlKey&&!t.button}function Bi(){return this.parentNode}function Yi(t,e){return e??{x:t.x,y:t.y}}function Xi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ri(){var t=Li,e=Bi,n=Yi,o=Xi,s={},l=So("start","drag","end"),r=0,i,u,g,d,y=0;function h(x){x.on("mousedown.drag",w).filter(o).on("touchstart.drag",N).on("touchmove.drag",z,Vi).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(x,p){if(!(d||!t.call(this,x,p))){var S=v(this,e.call(this,x,p),x,p,"mouse");S&&(it(x.view).on("mousemove.drag",k,Lt).on("mouseup.drag",C,Lt),No(x.view),mn(x),g=!1,i=x.clientX,u=x.clientY,S("start",x))}}function k(x){if(kt(x),!g){var p=x.clientX-i,S=x.clientY-u;g=p*p+S*S>y}s.mouse("drag",x)}function C(x){it(x.view).on("mousemove.drag mouseup.drag",null),To(x.view,g),kt(x),s.mouse("end",x)}function N(x,p){if(t.call(this,x,p)){var S=x.changedTouches,P=e.call(this,x,p),D=S.length,B,O;for(B=0;B<D;++B)(O=v(this,P,x,p,S[B].identifier,S[B]))&&(mn(x),O("start",x,S[B]))}}function z(x){var p=x.changedTouches,S=p.length,P,D;for(P=0;P<S;++P)(D=s[p[P].identifier])&&(kt(x),D("drag",x,p[P]))}function b(x){var p=x.changedTouches,S=p.length,P,D;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),P=0;P<S;++P)(D=s[p[P].identifier])&&(mn(x),D("end",x,p[P]))}function v(x,p,S,P,D,B){var O=l.copy(),Y=ct(B||S,p),I,L,f;if((f=n.call(x,new kn("beforestart",{sourceEvent:S,target:h,identifier:D,active:r,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:O}),P))!=null)return I=f.x-Y[0]||0,L=f.y-Y[1]||0,function M(m,_,T){var H=Y,R;switch(m){case"start":s[D]=M,R=r++;break;case"end":delete s[D],--r;case"drag":Y=ct(T||_,p),R=r;break}O.call(m,x,new kn(m,{sourceEvent:_,subject:f,target:h,identifier:D,active:R,x:Y[0]+I,y:Y[1]+L,dx:Y[0]-H[0],dy:Y[1]-H[1],dispatch:O}),P)}}return h.filter=function(x){return arguments.length?(t=typeof x=="function"?x:Gt(!!x),h):t},h.container=function(x){return arguments.length?(e=typeof x=="function"?x:Gt(x),h):e},h.subject=function(x){return arguments.length?(n=typeof x=="function"?x:Gt(x),h):n},h.touchable=function(x){return arguments.length?(o=typeof x=="function"?x:Gt(!!x),h):o},h.on=function(){var x=l.on.apply(l,arguments);return x===l?h:x},h.clickDistance=function(x){return arguments.length?(y=(x=+x)*x,h):Math.sqrt(y)},h}const jt=t=>()=>t;function Ki(t,{sourceEvent:e,target:n,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function yn(t){t.stopImmediatePropagation()}function Dt(t){t.preventDefault(),t.stopImmediatePropagation()}function Wi(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Zi(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function to(){return this.__zoom||On}function Fi(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Gi(){return navigator.maxTouchPoints||"ontouchstart"in this}function ji(t,e,n){var o=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),r>l?(l+r)/2:Math.min(0,l)||Math.max(0,r))}function Ui(){var t=Wi,e=Zi,n=ji,o=Fi,s=Gi,l=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],i=250,u=Hi,g=So("start","zoom","end"),d,y,h,w=500,k=150,C=0,N=10;function z(f){f.property("__zoom",to).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",Y).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}z.transform=function(f,M,m,_){var T=f.selection?f.selection():f;T.property("__zoom",to),f!==T?p(f,M,m,_):T.interrupt().each(function(){S(this,arguments).event(_).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},z.scaleBy=function(f,M,m,_){z.scaleTo(f,function(){var T=this.__zoom.k,H=typeof M=="function"?M.apply(this,arguments):M;return T*H},m,_)},z.scaleTo=function(f,M,m,_){z.transform(f,function(){var T=e.apply(this,arguments),H=this.__zoom,R=m==null?x(T):typeof m=="function"?m.apply(this,arguments):m,X=H.invert(R),K=typeof M=="function"?M.apply(this,arguments):M;return n(v(b(H,K),R,X),T,r)},m,_)},z.translateBy=function(f,M,m,_){z.transform(f,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof m=="function"?m.apply(this,arguments):m),e.apply(this,arguments),r)},null,_)},z.translateTo=function(f,M,m,_,T){z.transform(f,function(){var H=e.apply(this,arguments),R=this.__zoom,X=_==null?x(H):typeof _=="function"?_.apply(this,arguments):_;return n(On.translate(X[0],X[1]).scale(R.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof m=="function"?-m.apply(this,arguments):-m),H,r)},_,T)};function b(f,M){return M=Math.max(l[0],Math.min(l[1],M)),M===f.k?f:new gn(M,f.x,f.y)}function v(f,M,m){var _=M[0]-m[0]*f.k,T=M[1]-m[1]*f.k;return _===f.x&&T===f.y?f:new gn(f.k,_,T)}function x(f){return[(+f[0][0]+ +f[1][0])/2,(+f[0][1]+ +f[1][1])/2]}function p(f,M,m,_){f.on("start.zoom",function(){S(this,arguments).event(_).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(_).end()}).tween("zoom",function(){var T=this,H=arguments,R=S(T,H).event(_),X=e.apply(T,H),K=m==null?x(X):typeof m=="function"?m.apply(T,H):m,U=Math.max(X[1][0]-X[0][0],X[1][1]-X[0][1]),W=T.__zoom,q=typeof M=="function"?M.apply(T,H):M,te=u(W.invert(K).concat(U/W.k),q.invert(K).concat(U/q.k));return function(ge){if(ge===1)ge=q;else{var ie=te(ge),re=U/ie[2];ge=new gn(re,K[0]-ie[0]*re,K[1]-ie[1]*re)}R.zoom(null,ge)}})}function S(f,M,m){return!m&&f.__zooming||new P(f,M)}function P(f,M){this.that=f,this.args=M,this.active=0,this.sourceEvent=null,this.extent=e.apply(f,M),this.taps=0}P.prototype={event:function(f){return f&&(this.sourceEvent=f),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(f,M){return this.mouse&&f!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&f!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&f!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(f){var M=it(this.that).datum();g.call(f,this.that,new Ki(f,{sourceEvent:this.sourceEvent,target:z,type:f,transform:this.that.__zoom,dispatch:g}),M)}};function D(f,...M){if(!t.apply(this,arguments))return;var m=S(this,M).event(f),_=this.__zoom,T=Math.max(l[0],Math.min(l[1],_.k*Math.pow(2,o.apply(this,arguments)))),H=ct(f);if(m.wheel)(m.mouse[0][0]!==H[0]||m.mouse[0][1]!==H[1])&&(m.mouse[1]=_.invert(m.mouse[0]=H)),clearTimeout(m.wheel);else{if(_.k===T)return;m.mouse=[H,_.invert(H)],hn(this),m.start()}Dt(f),m.wheel=setTimeout(R,k),m.zoom("mouse",n(v(b(_,T),m.mouse[0],m.mouse[1]),m.extent,r));function R(){m.wheel=null,m.end()}}function B(f,...M){if(h||!t.apply(this,arguments))return;var m=f.currentTarget,_=S(this,M,!0).event(f),T=it(f.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",U,!0),H=ct(f,m),R=f.clientX,X=f.clientY;No(f.view),yn(f),_.mouse=[H,this.__zoom.invert(H)],hn(this),_.start();function K(W){if(Dt(W),!_.moved){var q=W.clientX-R,te=W.clientY-X;_.moved=q*q+te*te>C}_.event(W).zoom("mouse",n(v(_.that.__zoom,_.mouse[0]=ct(W,m),_.mouse[1]),_.extent,r))}function U(W){T.on("mousemove.zoom mouseup.zoom",null),To(W.view,_.moved),Dt(W),_.event(W).end()}}function O(f,...M){if(t.apply(this,arguments)){var m=this.__zoom,_=ct(f.changedTouches?f.changedTouches[0]:f,this),T=m.invert(_),H=m.k*(f.shiftKey?.5:2),R=n(v(b(m,H),_,T),e.apply(this,M),r);Dt(f),i>0?it(this).transition().duration(i).call(p,R,_,f):it(this).call(z.transform,R,_,f)}}function Y(f,...M){if(t.apply(this,arguments)){var m=f.touches,_=m.length,T=S(this,M,f.changedTouches.length===_).event(f),H,R,X,K;for(yn(f),R=0;R<_;++R)X=m[R],K=ct(X,this),K=[K,this.__zoom.invert(K),X.identifier],T.touch0?!T.touch1&&T.touch0[2]!==K[2]&&(T.touch1=K,T.taps=0):(T.touch0=K,H=!0,T.taps=1+!!d);d&&(d=clearTimeout(d)),H&&(T.taps<2&&(y=K[0],d=setTimeout(function(){d=null},w)),hn(this),T.start())}}function I(f,...M){if(this.__zooming){var m=S(this,M).event(f),_=f.changedTouches,T=_.length,H,R,X,K;for(Dt(f),H=0;H<T;++H)R=_[H],X=ct(R,this),m.touch0&&m.touch0[2]===R.identifier?m.touch0[0]=X:m.touch1&&m.touch1[2]===R.identifier&&(m.touch1[0]=X);if(R=m.that.__zoom,m.touch1){var U=m.touch0[0],W=m.touch0[1],q=m.touch1[0],te=m.touch1[1],ge=(ge=q[0]-U[0])*ge+(ge=q[1]-U[1])*ge,ie=(ie=te[0]-W[0])*ie+(ie=te[1]-W[1])*ie;R=b(R,Math.sqrt(ge/ie)),X=[(U[0]+q[0])/2,(U[1]+q[1])/2],K=[(W[0]+te[0])/2,(W[1]+te[1])/2]}else if(m.touch0)X=m.touch0[0],K=m.touch0[1];else return;m.zoom("touch",n(v(R,X,K),m.extent,r))}}function L(f,...M){if(this.__zooming){var m=S(this,M).event(f),_=f.changedTouches,T=_.length,H,R;for(yn(f),h&&clearTimeout(h),h=setTimeout(function(){h=null},w),H=0;H<T;++H)R=_[H],m.touch0&&m.touch0[2]===R.identifier?delete m.touch0:m.touch1&&m.touch1[2]===R.identifier&&delete m.touch1;if(m.touch1&&!m.touch0&&(m.touch0=m.touch1,delete m.touch1),m.touch0)m.touch0[1]=this.__zoom.invert(m.touch0[0]);else if(m.end(),m.taps===2&&(R=ct(R,this),Math.hypot(y[0]-R[0],y[1]-R[1])<N)){var X=it(this).on("dblclick.zoom");X&&X.apply(this,arguments)}}}return z.wheelDelta=function(f){return arguments.length?(o=typeof f=="function"?f:jt(+f),z):o},z.filter=function(f){return arguments.length?(t=typeof f=="function"?f:jt(!!f),z):t},z.touchable=function(f){return arguments.length?(s=typeof f=="function"?f:jt(!!f),z):s},z.extent=function(f){return arguments.length?(e=typeof f=="function"?f:jt([[+f[0][0],+f[0][1]],[+f[1][0],+f[1][1]]]),z):e},z.scaleExtent=function(f){return arguments.length?(l[0]=+f[0],l[1]=+f[1],z):[l[0],l[1]]},z.translateExtent=function(f){return arguments.length?(r[0][0]=+f[0][0],r[1][0]=+f[1][0],r[0][1]=+f[0][1],r[1][1]=+f[1][1],z):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},z.constrain=function(f){return arguments.length?(n=f,z):n},z.duration=function(f){return arguments.length?(i=+f,z):i},z.interpolate=function(f){return arguments.length?(u=f,z):u},z.on=function(){var f=g.on.apply(g,arguments);return f===g?z:f},z.clickDistance=function(f){return arguments.length?(C=(f=+f)*f,z):Math.sqrt(C)},z.tapDistance=function(f){return arguments.length?(N=+f,z):N},z}const Kt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:o}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},Jt=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var vt;(function(t){t.Strict="strict",t.Loose="loose"})(vt||(vt={}));var gt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(gt||(gt={}));var Qt;(function(t){t.Partial="partial",t.Full="full"})(Qt||(Qt={}));const En={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Et;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Et||(Et={}));var wt;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(wt||(wt={}));var oe;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(oe||(oe={}));const no={[oe.Left]:oe.Right,[oe.Right]:oe.Left,[oe.Top]:oe.Bottom,[oe.Bottom]:oe.Top};function qi(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function oo(t,e,n){if(!n)return;const o=[];t.forEach((s,l)=>{e!=null&&e.has(l)||o.push(s)}),o.length&&n(o)}function io(t){return t===null?null:t?"valid":"invalid"}const Ji=t=>"id"in t&&"source"in t&&"target"in t,Qi=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),An=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),on=(t,e=[0,0])=>{const{width:n,height:o}=Tt(t),s=t.origin??e,l=n*s[0],r=o*s[1];return{x:t.position.x-l,y:t.position.y-r}},$i=(t,e={nodeOrigin:[0,0],nodeLookup:void 0})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,s)=>{const l=typeof s=="string";let r=!e.nodeLookup&&!l?s:void 0;e.nodeLookup&&(r=l?e.nodeLookup.get(s):An(s)?s:e.nodeLookup.get(s.id));const i=r?$t(r,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return sn(o,i)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ln(n)},rn=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(o=>{if(e.filter===void 0||e.filter(o)){const s=$t(o);n=sn(n,s)}}),ln(n)},Io=(t,e,[n,o,s]=[0,0,1],l=!1,r=!1)=>{const i={...Wt(e,[n,o,s]),width:e.width/s,height:e.height/s},u=[];for(const g of t.values()){const{measured:d,selectable:y=!0,hidden:h=!1}=g;if(r&&!y||h)continue;const w=d.width??g.width??g.initialWidth??null,k=d.height??g.height??g.initialHeight??null,C=Bt(i,Mt(g)),N=(w??0)*(k??0),z=l&&C>0;(!g.internals.handleBounds||z||C>=N||g.dragging)&&u.push(g)}return u},Pn=(t,e)=>{const n=new Set;return t.forEach(o=>{n.add(o.id)}),e.filter(o=>n.has(o.source)||n.has(o.target))};function ro(t,e){const n=new Map,o=e!=null&&e.nodes?new Set(e.nodes.map(s=>s.id)):null;return t.forEach(s=>{s.measured.width&&s.measured.height&&((e==null?void 0:e.includeHiddenNodes)||!s.hidden)&&(!o||o.has(s.id))&&n.set(s.id,s)}),n}async function so({nodes:t,width:e,height:n,panZoom:o,minZoom:s,maxZoom:l},r){if(t.size===0)return Promise.resolve(!1);const i=rn(t),u=Ln(i,e,n,(r==null?void 0:r.minZoom)??s,(r==null?void 0:r.maxZoom)??l,(r==null?void 0:r.padding)??.1);return await o.setViewport(u,{duration:r==null?void 0:r.duration}),Promise.resolve(!0)}function er({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:s,onError:l}){const r=n.get(t),i=r.parentId?n.get(r.parentId):void 0,{x:u,y:g}=i?i.internals.positionAbsolute:{x:0,y:0},d=r.origin??o;let y=s;if(r.extent==="parent"&&!r.expandParent)if(!i)l==null||l("005",Kt.error005());else{const w=i.measured.width,k=i.measured.height;w&&k&&(y=[[u,g],[u+w,g+k]])}else i&&Yt(r.extent)&&(y=[[r.extent[0][0]+u,r.extent[0][1]+g],[r.extent[1][0]+u,r.extent[1][1]+g]]);const h=Yt(y)?St(e,y,r.measured):e;return{position:{x:h.x-u+r.measured.width*d[0],y:h.y-g+r.measured.height*d[1]},positionAbsolute:h}}async function Oo({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:o,onBeforeDelete:s}){const l=new Set(t.map(h=>h.id)),r=[];for(const h of n){if(h.deletable===!1)continue;const w=l.has(h.id),k=!w&&h.parentId&&r.find(C=>C.id===h.parentId);(w||k)&&r.push(h)}const i=new Set(e.map(h=>h.id)),u=o.filter(h=>h.deletable!==!1),d=Pn(r,u);for(const h of u)i.has(h.id)&&!d.find(k=>k.id===h.id)&&d.push(h);if(!s)return{edges:d,nodes:r};const y=await s({nodes:r,edges:d});return typeof y=="boolean"?y?{edges:d,nodes:r}:{edges:[],nodes:[]}:y}const Ct=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),St=(t={x:0,y:0},e,n)=>({x:Ct(t.x,e[0][0],e[1][0]-((n==null?void 0:n.width)??0)),y:Ct(t.y,e[0][1],e[1][1]-((n==null?void 0:n.height)??0))});function Ho(t,e,n){const{width:o,height:s}=Tt(n),{x:l,y:r}=n.internals.positionAbsolute;return St(t,[[l,r],[l+o,r+s]],e)}const lo=(t,e,n)=>t<e?Ct(Math.abs(t-e),1,e)/e:t>n?-Ct(Math.abs(t-n),1,e)/e:0,Do=(t,e,n=15,o=40)=>{const s=lo(t.x,o,e.width-o)*n,l=lo(t.y,o,e.height-o)*n;return[s,l]},sn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),zn=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),ln=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),Mt=(t,e=[0,0])=>{var s,l;const{x:n,y:o}=An(t)?t.internals.positionAbsolute:on(t,e);return{x:n,y:o,width:((s=t.measured)==null?void 0:s.width)??t.width??t.initialWidth??0,height:((l=t.measured)==null?void 0:l.height)??t.height??t.initialHeight??0}},$t=(t,e=[0,0])=>{var s,l;const{x:n,y:o}=An(t)?t.internals.positionAbsolute:on(t,e);return{x:n,y:o,x2:n+(((s=t.measured)==null?void 0:s.width)??t.width??t.initialWidth??0),y2:o+(((l=t.measured)==null?void 0:l.height)??t.height??t.initialHeight??0)}},tr=(t,e)=>ln(sn(zn(t),zn(e))),Bt=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},ao=t=>dt(t.width)&&dt(t.height)&&dt(t.x)&&dt(t.y),dt=t=>!isNaN(t)&&isFinite(t),nr=(t,e)=>{},Vn=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Wt=({x:t,y:e},[n,o,s],l=!1,r=[1,1])=>{const i={x:(t-n)/s,y:(e-o)/s};return l?Vn(i,r):i},Ao=({x:t,y:e},[n,o,s])=>({x:t*s+n,y:e*s+o}),Ln=(t,e,n,o,s,l)=>{const r=e/(t.width*(1+l)),i=n/(t.height*(1+l)),u=Math.min(r,i),g=Ct(u,o,s),d=t.x+t.width/2,y=t.y+t.height/2,h=e/2-d*g,w=n/2-y*g;return{x:h,y:w,zoom:g}},en=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0};function Yt(t){return t!==void 0&&t!=="parent"}function Tt(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function co(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function or(t,e={width:0,height:0},n,o,s){let l=n;const r={...t};for(;l;){const i=o.get(l);if(l=i==null?void 0:i.parentId,i){const u=i.origin||s;r.x+=i.internals.positionAbsolute.x-(e.width??0)*u[0],r.y+=i.internals.positionAbsolute.y-(e.height??0)*u[1]}}return r}function vn(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:o}){const{x:s,y:l}=ht(t),r=Wt({x:s,y:l},o),{x:i,y:u}=n?Vn(r,e):r;return{xSnapped:i,ySnapped:u,...r}}const Vo=t=>({width:t.offsetWidth,height:t.offsetHeight}),ir=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},rr=["INPUT","SELECT","TEXTAREA"];function sr(t){var o,s;const e=((s=(o=t.composedPath)==null?void 0:o.call(t))==null?void 0:s[0])||t.target;return rr.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}const Lo=t=>"clientX"in t,ht=(t,e)=>{var l,r;const n=Lo(t),o=n?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,s=n?t.clientY:(r=t.touches)==null?void 0:r[0].clientY;return{x:o-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},uo=(t,e,n,o,s)=>{const l=e.querySelectorAll(`.${t}`);return!l||!l.length?null:Array.from(l).map(r=>{const i=r.getBoundingClientRect();return{id:r.getAttribute("data-handleid"),type:t,nodeId:s,position:r.getAttribute("data-handlepos"),x:(i.left-n.left)/o,y:(i.top-n.top)/o,...Vo(r)}})};function lr({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:s,sourceControlY:l,targetControlX:r,targetControlY:i}){const u=t*.125+s*.375+r*.375+n*.125,g=e*.125+l*.375+i*.375+o*.125,d=Math.abs(u-t),y=Math.abs(g-e);return[u,g,d,y]}function Ut(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function fo({pos:t,x1:e,y1:n,x2:o,y2:s,c:l}){switch(t){case oe.Left:return[e-Ut(e-o,l),n];case oe.Right:return[e+Ut(o-e,l),n];case oe.Top:return[e,n-Ut(n-s,l)];case oe.Bottom:return[e,n+Ut(s-n,l)]}}function Bo({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:o,targetY:s,targetPosition:l=oe.Top,curvature:r=.25}){const[i,u]=fo({pos:n,x1:t,y1:e,x2:o,y2:s,c:r}),[g,d]=fo({pos:l,x1:o,y1:s,x2:t,y2:e,c:r}),[y,h,w,k]=lr({sourceX:t,sourceY:e,targetX:o,targetY:s,sourceControlX:i,sourceControlY:u,targetControlX:g,targetControlY:d});return[`M${t},${e} C${i},${u} ${g},${d} ${o},${s}`,y,h,w,k]}function Yo({sourceX:t,sourceY:e,targetX:n,targetY:o}){const s=Math.abs(n-t)/2,l=n<t?n+s:n-s,r=Math.abs(o-e)/2,i=o<e?o+r:o-r;return[l,i,s,r]}function ar({sourceNode:t,targetNode:e,selected:n=!1,zIndex:o=0,elevateOnSelect:s=!1}){if(!s)return o;const l=n||e.selected||t.selected,r=Math.max(t.internals.z||0,e.internals.z||0,1e3);return o+(l?r:0)}function cr({sourceNode:t,targetNode:e,width:n,height:o,transform:s}){const l=sn($t(t),$t(e));l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const r={x:-s[0]/s[2],y:-s[1]/s[2],width:n/s[2],height:o/s[2]};return Bt(r,ln(l))>0}const dr=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`xy-edge__${t}${e||""}-${n}${o||""}`,ur=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),fr=(t,e)=>{if(!t.source||!t.target)return e;let n;return Ji(t)?n={...t}:n={...t,id:dr(t)},ur(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Cn({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[s,l,r,i]=Yo({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,s,l,r,i]}const go={[oe.Left]:{x:-1,y:0},[oe.Right]:{x:1,y:0},[oe.Top]:{x:0,y:-1},[oe.Bottom]:{x:0,y:1}},gr=({source:t,sourcePosition:e=oe.Bottom,target:n})=>e===oe.Left||e===oe.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ho=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function hr({source:t,sourcePosition:e=oe.Bottom,target:n,targetPosition:o=oe.Top,center:s,offset:l}){const r=go[e],i=go[o],u={x:t.x+r.x*l,y:t.y+r.y*l},g={x:n.x+i.x*l,y:n.y+i.y*l},d=gr({source:u,sourcePosition:e,target:g}),y=d.x!==0?"x":"y",h=d[y];let w=[],k,C;const N={x:0,y:0},z={x:0,y:0},[b,v,x,p]=Yo({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(r[y]*i[y]===-1){k=s.x??b,C=s.y??v;const P=[{x:k,y:u.y},{x:k,y:g.y}],D=[{x:u.x,y:C},{x:g.x,y:C}];r[y]===h?w=y==="x"?P:D:w=y==="x"?D:P}else{const P=[{x:u.x,y:g.y}],D=[{x:g.x,y:u.y}];if(y==="x"?w=r.x===h?D:P:w=r.y===h?P:D,e===o){const L=Math.abs(t[y]-n[y]);if(L<=l){const f=Math.min(l-1,l-L);r[y]===h?N[y]=(u[y]>t[y]?-1:1)*f:z[y]=(g[y]>n[y]?-1:1)*f}}if(e!==o){const L=y==="x"?"y":"x",f=r[y]===i[L],M=u[L]>g[L],m=u[L]<g[L];(r[y]===1&&(!f&&M||f&&m)||r[y]!==1&&(!f&&m||f&&M))&&(w=y==="x"?P:D)}const B={x:u.x+N.x,y:u.y+N.y},O={x:g.x+z.x,y:g.y+z.y},Y=Math.max(Math.abs(B.x-w[0].x),Math.abs(O.x-w[0].x)),I=Math.max(Math.abs(B.y-w[0].y),Math.abs(O.y-w[0].y));Y>=I?(k=(B.x+O.x)/2,C=w[0].y):(k=w[0].x,C=(B.y+O.y)/2)}return[[t,{x:u.x+N.x,y:u.y+N.y},...w,{x:g.x+z.x,y:g.y+z.y},n],k,C,x,p]}function mr(t,e,n,o){const s=Math.min(ho(t,e)/2,ho(e,n)/2,o),{x:l,y:r}=e;if(t.x===l&&l===n.x||t.y===r&&r===n.y)return`L${l} ${r}`;if(t.y===r){const g=t.x<n.x?-1:1,d=t.y<n.y?1:-1;return`L ${l+s*g},${r}Q ${l},${r} ${l},${r+s*d}`}const i=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${l},${r+s*u}Q ${l},${r} ${l+s*i},${r}`}function tn({sourceX:t,sourceY:e,sourcePosition:n=oe.Bottom,targetX:o,targetY:s,targetPosition:l=oe.Top,borderRadius:r=5,centerX:i,centerY:u,offset:g=20}){const[d,y,h,w,k]=hr({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:s},targetPosition:l,center:{x:i,y:u},offset:g});return[d.reduce((N,z,b)=>{let v="";return b>0&&b<d.length-1?v=mr(d[b-1],z,d[b+1],r):v=`${b===0?"M":"L"}${z.x} ${z.y}`,N+=v,N},""),y,h,w,k]}function mo(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function yr(t){var y;const{sourceNode:e,targetNode:n}=t;if(!mo(e)||!mo(n))return null;const o=e.internals.handleBounds||yo(e.handles),s=n.internals.handleBounds||yo(n.handles),l=vo((o==null?void 0:o.source)??[],t.sourceHandle),r=vo(t.connectionMode===vt.Strict?(s==null?void 0:s.target)??[]:((s==null?void 0:s.target)??[]).concat((s==null?void 0:s.source)??[]),t.targetHandle);if(!l||!r)return(y=t.onError)==null||y.call(t,"008",Kt.error008(l?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const i=(l==null?void 0:l.position)||oe.Bottom,u=(r==null?void 0:r.position)||oe.Top,g=Xt(e,l,i),d=Xt(n,r,u);return{sourceX:g.x,sourceY:g.y,targetX:d.x,targetY:d.y,sourcePosition:i,targetPosition:u}}function yo(t){if(!t)return null;const e=[],n=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,o.type==="source"?e.push(o):o.type==="target"&&n.push(o);return{source:e,target:n}}function Xt(t,e,n=oe.Left,o=!1){const s=((e==null?void 0:e.x)??0)+t.internals.positionAbsolute.x,l=((e==null?void 0:e.y)??0)+t.internals.positionAbsolute.y,{width:r,height:i}=e??Tt(t);if(o)return{x:s+r/2,y:l+i/2};switch((e==null?void 0:e.position)??n){case oe.Top:return{x:s+r/2,y:l};case oe.Right:return{x:s+r,y:l+i/2};case oe.Bottom:return{x:s+r/2,y:l+i};case oe.Left:return{x:s,y:l+i/2}}}function vo(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Sn(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`:""}function vr(t,{id:e,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:s}){const l=new Set;return t.reduce((r,i)=>([i.markerStart||o,i.markerEnd||s].forEach(u=>{if(u&&typeof u=="object"){const g=Sn(u,e);l.has(g)||(r.push({id:g,color:u.color||n,...u}),l.add(g))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))}const Xo={nodeOrigin:[0,0],nodeExtent:Jt,elevateNodesOnSelect:!0,defaults:{}},br={...Xo,checkEquality:!0};function Ro(t,e){const n={...t};for(const o in e)e[o]!==void 0&&(n[o]=e[o]);return n}function Ko(t,e,n,o){var i,u;const s=Ro(br,o),l=new Map(e),r=s!=null&&s.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const g of t){let d=l.get(g.id);if(s.checkEquality&&g===(d==null?void 0:d.internals.userNode))e.set(g.id,d);else{const y=on(g,s.nodeOrigin),h=Yt(g.extent)?g.extent:s.nodeExtent,w=St(y,h,Tt(g));d={...s.defaults,...g,measured:{width:(i=g.measured)==null?void 0:i.width,height:(u=g.measured)==null?void 0:u.height},internals:{positionAbsolute:w,handleBounds:g.measured?d==null?void 0:d.internals.handleBounds:void 0,z:Zo(g,r),userNode:g}},e.set(g.id,d)}g.parentId&&Wo(d,e,n,o)}}function wr(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Wo(t,e,n,o){const{elevateNodesOnSelect:s,nodeOrigin:l,nodeExtent:r}=Ro(Xo,o),i=t.parentId,u=e.get(i);if(!u){console.warn(`Parent node ${i} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}wr(t,n);const g=s?1e3:0,{x:d,y,z:h}=xr(t,u,l,r,g),{positionAbsolute:w}=t.internals,k=d!==w.x||y!==w.y;(k||h!==t.internals.z)&&(t.internals={...t.internals,positionAbsolute:k?{x:d,y}:w,z:h})}function Zo(t,e){return(dt(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function xr(t,e,n,o,s){const{x:l,y:r}=e.internals.positionAbsolute,i=Tt(t),u=on(t,n),g=Yt(t.extent)?St(u,t.extent,i):u;let d=St({x:l+g.x,y:r+g.y},o,i);t.extent==="parent"&&(d=Ho(d,i,e));const y=Zo(t,s),h=e.internals.z??0;return{x:d.x,y:d.y,z:h>y?h:y}}function pr(t,e,n,o=[0,0]){var r;const s=[],l=new Map;for(const i of t){const u=e.get(i.parentId);if(!u)continue;const g=((r=l.get(i.parentId))==null?void 0:r.expandedRect)??Mt(u),d=tr(g,i.rect);l.set(i.parentId,{expandedRect:d,parent:u})}return l.size>0&&l.forEach(({expandedRect:i,parent:u},g)=>{var v;const d=u.internals.positionAbsolute,y=Tt(u),h=u.origin??o,w=i.x<d.x?Math.round(Math.abs(d.x-i.x)):0,k=i.y<d.y?Math.round(Math.abs(d.y-i.y)):0,C=Math.max(y.width,Math.round(i.width)),N=Math.max(y.height,Math.round(i.height)),z=(C-y.width)*h[0],b=(N-y.height)*h[1];(w>0||k>0||z||b)&&(s.push({id:g,type:"position",position:{x:u.position.x-w+z,y:u.position.y-k+b}}),(v=n.get(g))==null||v.forEach(x=>{t.some(p=>p.id===x.id)||s.push({id:x.id,type:"position",position:{x:x.position.x+w,y:x.position.y+k}})})),(y.width<i.width||y.height<i.height||w||k)&&s.push({id:g,type:"dimensions",setAttributes:!0,dimensions:{width:C+(w?h[0]*w-z:0),height:N+(k?h[1]*k-b:0)}})}),s}function _r(t,e,n,o,s,l){const r=o==null?void 0:o.querySelector(".xyflow__viewport");let i=!1;if(!r)return{changes:[],updatedInternals:i};const u=[],g=window.getComputedStyle(r),{m22:d}=new window.DOMMatrixReadOnly(g.transform),y=[];for(const h of t.values()){const w=e.get(h.id);if(w)if(w.hidden)w.internals={...w.internals,handleBounds:void 0},i=!0;else{const k=Vo(h.nodeElement),C=w.measured.width!==k.width||w.measured.height!==k.height;if(!!(k.width&&k.height&&(C||!w.internals.handleBounds||h.force))){const z=h.nodeElement.getBoundingClientRect(),b=Yt(w.extent)?w.extent:l;let{positionAbsolute:v}=w.internals;w.parentId&&w.extent==="parent"?v=Ho(v,k,e.get(w.parentId)):b&&(v=St(v,b,k)),w.measured=k,w.internals={...w.internals,positionAbsolute:v,handleBounds:{source:uo("source",h.nodeElement,z,d,w.id),target:uo("target",h.nodeElement,z,d,w.id)}},w.parentId&&Wo(w,e,n,{nodeOrigin:s}),i=!0,C&&(u.push({id:w.id,type:"dimensions",dimensions:k}),w.expandParent&&w.parentId&&y.push({id:w.id,parentId:w.parentId,rect:Mt(w,s)}))}}}if(y.length>0){const h=pr(y,e,n,s);u.push(...h)}return{changes:u,updatedInternals:i}}async function kr({delta:t,panZoom:e,transform:n,translateExtent:o,width:s,height:l}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const r=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[s,l]],o),i=!!r&&(r.x!==n[0]||r.y!==n[1]||r.k!==n[2]);return Promise.resolve(i)}function Fo(t,e,n){t.clear(),e.clear();for(const o of n){const{source:s,target:l,sourceHandle:r=null,targetHandle:i=null}=o,u=`${s}-source-${r}`,g=`${l}-target-${i}`,d=t.get(u)||new Map,y=t.get(g)||new Map,h={edgeId:o.id,source:s,target:l,sourceHandle:r,targetHandle:i};e.set(o.id,o),t.set(u,d.set(`${l}-${i}`,h)),t.set(g,y.set(`${s}-${r}`,h))}}function Go(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Go(n,e):!1}function bo(t,e,n){let o=t;do{if(o!=null&&o.matches(e))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function Er(t,e,n,o){const s=new Map;for(const[l,r]of t)if((r.selected||r.id===o)&&(!r.parentId||!Go(r,t))&&(r.draggable||e&&typeof r.draggable>"u")){const i=t.get(l);i&&s.set(l,{id:l,position:i.position||{x:0,y:0},distance:{x:n.x-i.internals.positionAbsolute.x,y:n.y-i.internals.positionAbsolute.y},extent:i.extent,parentId:i.parentId,origin:i.origin,expandParent:i.expandParent,internals:{positionAbsolute:i.internals.positionAbsolute||{x:0,y:0}},measured:{width:i.measured.width??0,height:i.measured.height??0}})}return s}function bn({nodeId:t,dragItems:e,nodeLookup:n,dragging:o=!0}){var r,i;const s=[];for(const[u,g]of e){const d=(r=n.get(u))==null?void 0:r.internals.userNode;d&&s.push({...d,position:g.position,dragging:o})}if(!t)return[s[0],s];const l=n.get(t).internals.userNode;return[{...l,position:((i=e.get(t))==null?void 0:i.position)||l.position,dragging:o},s]}function Pr({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:o,onDragStop:s}){let l={x:null,y:null},r=0,i=new Map,u=!1,g={x:0,y:0},d=null,y=!1,h=null,w=!1;function k({noDragClassName:N,handleSelector:z,domNode:b,isSelectable:v,nodeId:x,nodeClickDistance:p=0}){h=it(b);function S({x:O,y:Y},I){const{nodeLookup:L,nodeExtent:f,snapGrid:M,snapToGrid:m,nodeOrigin:_,onNodeDrag:T,onSelectionDrag:H,onError:R,updateNodePositions:X}=e();l={x:O,y:Y};let K=!1,U={x:0,y:0,x2:0,y2:0};if(i.size>1&&f){const W=rn(i);U=zn(W)}for(const[W,q]of i){let te={x:O-q.distance.x,y:Y-q.distance.y};m&&(te=Vn(te,M));let ge=[[f[0][0],f[0][1]],[f[1][0],f[1][1]]];if(i.size>1&&f&&!q.extent){const{positionAbsolute:F}=q.internals,G=F.x-U.x+f[0][0],ne=F.x+q.measured.width-U.x2+f[1][0],Ee=F.y-U.y+f[0][1],Ne=F.y+q.measured.height-U.y2+f[1][1];ge=[[G,Ee],[ne,Ne]]}const{position:ie,positionAbsolute:re}=er({nodeId:W,nextPosition:te,nodeLookup:L,nodeExtent:ge,nodeOrigin:_,onError:R});K=K||q.position.x!==ie.x||q.position.y!==ie.y,q.position=ie,q.internals.positionAbsolute=re}if(K&&(X(i,!0),I&&(o||T||!x&&H))){const[W,q]=bn({nodeId:x,dragItems:i,nodeLookup:L});o==null||o(I,i,W,q),T==null||T(I,W,q),x||H==null||H(I,q)}}async function P(){if(!d)return;const{transform:O,panBy:Y,autoPanSpeed:I}=e(),[L,f]=Do(g,d,I);(L!==0||f!==0)&&(l.x=(l.x??0)-L/O[2],l.y=(l.y??0)-f/O[2],await Y({x:L,y:f})&&S(l,null)),r=requestAnimationFrame(P)}function D(O){var K;const{nodeLookup:Y,multiSelectionActive:I,nodesDraggable:L,transform:f,snapGrid:M,snapToGrid:m,selectNodesOnDrag:_,onNodeDragStart:T,onSelectionDragStart:H,unselectNodesAndEdges:R}=e();y=!0,(!_||!v)&&!I&&x&&((K=Y.get(x))!=null&&K.selected||R()),v&&_&&x&&(t==null||t(x));const X=vn(O.sourceEvent,{transform:f,snapGrid:M,snapToGrid:m});if(l=X,i=Er(Y,L,X,x),i.size>0&&(n||T||!x&&H)){const[U,W]=bn({nodeId:x,dragItems:i,nodeLookup:Y});n==null||n(O.sourceEvent,i,U,W),T==null||T(O.sourceEvent,U,W),x||H==null||H(O.sourceEvent,W)}}const B=Ri().clickDistance(p).on("start",O=>{const{domNode:Y,nodeDragThreshold:I,transform:L,snapGrid:f,snapToGrid:M}=e();w=!1,I===0&&D(O),l=vn(O.sourceEvent,{transform:L,snapGrid:f,snapToGrid:M}),d=(Y==null?void 0:Y.getBoundingClientRect())||null,g=ht(O.sourceEvent,d)}).on("drag",O=>{const{autoPanOnNodeDrag:Y,transform:I,snapGrid:L,snapToGrid:f,nodeDragThreshold:M}=e(),m=vn(O.sourceEvent,{transform:I,snapGrid:L,snapToGrid:f});if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(w=!0),!w){if(!u&&Y&&y&&(u=!0,P()),!y){const _=m.xSnapped-(l.x??0),T=m.ySnapped-(l.y??0);Math.sqrt(_*_+T*T)>M&&D(O)}(l.x!==m.xSnapped||l.y!==m.ySnapped)&&i&&y&&(g=ht(O.sourceEvent,d),S(m,O.sourceEvent))}}).on("end",O=>{if(!(!y||w)&&(u=!1,y=!1,cancelAnimationFrame(r),i.size>0)){const{nodeLookup:Y,updateNodePositions:I,onNodeDragStop:L,onSelectionDragStop:f}=e();if(I(i,!1),s||L||!x&&f){const[M,m]=bn({nodeId:x,dragItems:i,nodeLookup:Y,dragging:!1});s==null||s(O.sourceEvent,i,M,m),L==null||L(O.sourceEvent,M,m),x||f==null||f(O.sourceEvent,m)}}}).filter(O=>{const Y=O.target;return!O.button&&(!N||!bo(Y,`.${N}`,b))&&(!z||bo(Y,z,b))});h.call(B)}function C(){h==null||h.on(".drag",null)}return{update:k,destroy:C}}function zr(t,e,n){const o=[],s={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const l of e.values())Bt(s,Mt(l))>0&&o.push(l);return o}const Cr=250;function Sr(t,e,n,o){var i,u;let s=[],l=1/0;const r=zr(t,n,e+Cr);for(const g of r){const d=[...((i=g.internals.handleBounds)==null?void 0:i.source)??[],...((u=g.internals.handleBounds)==null?void 0:u.target)??[]];for(const y of d){if(o.nodeId===y.nodeId&&o.type===y.type&&o.id===y.id)continue;const{x:h,y:w}=Xt(g,y,y.position,!0),k=Math.sqrt(Math.pow(h-t.x,2)+Math.pow(w-t.y,2));k>e||(k<l?(s=[{...y,x:h,y:w}],l=k):k===l&&s.push({...y,x:h,y:w}))}}if(!s.length)return null;if(s.length>1){const g=o.type==="source"?"target":"source";return s.find(d=>d.type===g)??s[0]}return s[0]}function jo(t,e,n,o,s,l=!1){var g,d,y;const r=o.get(t);if(!r)return null;const i=s==="strict"?(g=r.internals.handleBounds)==null?void 0:g[e]:[...((d=r.internals.handleBounds)==null?void 0:d.source)??[],...((y=r.internals.handleBounds)==null?void 0:y.target)??[]],u=(n?i==null?void 0:i.find(h=>h.id===n):i==null?void 0:i[0])??null;return u&&l?{...u,...Xt(r,u,u.position,!0)}:u}function Uo(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function Mr(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const qo=()=>!0;function Nr(t,{connectionMode:e,connectionRadius:n,handleId:o,nodeId:s,edgeUpdaterType:l,isTarget:r,domNode:i,nodeLookup:u,lib:g,autoPanOnConnect:d,flowId:y,panBy:h,cancelConnection:w,onConnectStart:k,onConnect:C,onConnectEnd:N,isValidConnection:z=qo,onReconnectEnd:b,updateConnection:v,getTransform:x,getFromHandle:p,autoPanSpeed:S}){const P=ir(t.target);let D=0,B;const{x:O,y:Y}=ht(t),I=P==null?void 0:P.elementFromPoint(O,Y),L=Uo(l,I),f=i==null?void 0:i.getBoundingClientRect();if(!f||!L)return;const M=jo(s,L,o,u,e);if(!M)return;let m=ht(t,f),_=!1,T=null,H=!1,R=null;function X(){if(!d||!f)return;const[re,F]=Do(m,f,S);h({x:re,y:F}),D=requestAnimationFrame(X)}const K={...M,nodeId:s,type:L,position:M.position},U=u.get(s),q={inProgress:!0,isValid:null,from:Xt(U,K,oe.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:U,to:m,toHandle:null,toPosition:no[K.position],toNode:null};v(q);let te=q;k==null||k(t,{nodeId:s,handleId:o,handleType:L});function ge(re){if(!p()||!K){ie(re);return}const F=x();m=ht(re,f),B=Sr(Wt(m,F,!1,[1,1]),n,u,K),_||(X(),_=!0);const G=Jo(re,{handle:B,connectionMode:e,fromNodeId:s,fromHandleId:o,fromType:r?"target":"source",isValidConnection:z,doc:P,lib:g,flowId:y,nodeLookup:u});R=G.handleDomNode,T=G.connection,H=Mr(!!B,G.isValid);const ne={...te,isValid:H,to:B&&H?Ao({x:B.x,y:B.y},F):m,toHandle:G.toHandle,toPosition:H&&G.toHandle?G.toHandle.position:no[K.position],toNode:G.toHandle?u.get(G.toHandle.nodeId):null};H&&B&&te.toHandle&&ne.toHandle&&te.toHandle.type===ne.toHandle.type&&te.toHandle.nodeId===ne.toHandle.nodeId&&te.toHandle.id===ne.toHandle.id&&te.to.x===ne.to.x&&te.to.y===ne.to.y||(v(ne),te=ne)}function ie(re){(B||R)&&T&&H&&(C==null||C(T));const{inProgress:F,...G}=te,ne={...G,toPosition:te.toHandle?te.toPosition:null};N==null||N(re,ne),l&&(b==null||b(re,ne)),w(),cancelAnimationFrame(D),_=!1,H=!1,T=null,R=null,P.removeEventListener("mousemove",ge),P.removeEventListener("mouseup",ie),P.removeEventListener("touchmove",ge),P.removeEventListener("touchend",ie)}P.addEventListener("mousemove",ge),P.addEventListener("mouseup",ie),P.addEventListener("touchmove",ge),P.addEventListener("touchend",ie)}function Jo(t,{handle:e,connectionMode:n,fromNodeId:o,fromHandleId:s,fromType:l,doc:r,lib:i,flowId:u,isValidConnection:g=qo,nodeLookup:d}){const y=l==="target",h=e?r.querySelector(`.${i}-flow__handle[data-id="${u}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`):null,{x:w,y:k}=ht(t),C=r.elementFromPoint(w,k),N=C!=null&&C.classList.contains(`${i}-flow__handle`)?C:h,z={handleDomNode:N,isValid:!1,connection:null,toHandle:null};if(N){const b=Uo(void 0,N),v=N.getAttribute("data-nodeid"),x=N.getAttribute("data-handleid"),p=N.classList.contains("connectable"),S=N.classList.contains("connectableend");if(!v||!b)return z;const P={source:y?v:o,sourceHandle:y?x:s,target:y?o:v,targetHandle:y?s:x};z.connection=P;const B=p&&S&&(n===vt.Strict?y&&b==="source"||!y&&b==="target":v!==o||x!==s);z.isValid=B&&g(P),z.toHandle=jo(v,b,x,d,n,!1)}return z}const Tr={onPointerDown:Nr,isValid:Jo},Ir=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,an=t=>({x:t.x,y:t.y,zoom:t.k}),wn=({x:t,y:e,zoom:n})=>On.translate(t,e).scale(n),xt=(t,e)=>t.target.closest(`.${e}`),Qo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),xn=(t,e=0,n=()=>{})=>{const o=typeof e=="number"&&e>0;return o||n(),o?t.transition().duration(e).on("end",n):t},$o=t=>{const e=t.ctrlKey&&en()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Or({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:o,panOnScrollMode:s,panOnScrollSpeed:l,zoomOnPinch:r,onPanZoomStart:i,onPanZoom:u,onPanZoomEnd:g}){return d=>{if(xt(d,e))return!1;d.preventDefault(),d.stopImmediatePropagation();const y=n.property("__zoom").k||1;if(d.ctrlKey&&r){const N=ct(d),z=$o(d),b=y*Math.pow(2,z);o.scaleTo(n,b,N,d);return}const h=d.deltaMode===1?20:1;let w=s===gt.Vertical?0:d.deltaX*h,k=s===gt.Horizontal?0:d.deltaY*h;!en()&&d.shiftKey&&s!==gt.Vertical&&(w=d.deltaY*h,k=0),o.translateBy(n,-(w/y)*l,-(k/y)*l,{internal:!0});const C=an(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,i==null||i(d,C)),t.isPanScrolling&&(u==null||u(d,C),t.panScrollTimeout=setTimeout(()=>{g==null||g(d,C),t.isPanScrolling=!1},150))}}function Hr({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(o,s){if(!e&&o.type==="wheel"&&!o.ctrlKey||xt(o,t))return null;o.preventDefault(),n.call(this,o,s)}}function Dr({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return o=>{var l,r,i;if((l=o.sourceEvent)!=null&&l.internal)return;const s=an(o.transform);t.mouseButton=((r=o.sourceEvent)==null?void 0:r.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=s,((i=o.sourceEvent)==null?void 0:i.type)==="mousedown"&&e(!0),n&&(n==null||n(o.sourceEvent,s))}}function Ar({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:o,onPanZoom:s}){return l=>{var r,i;t.usedRightMouseButton=!!(n&&Qo(e,t.mouseButton??0)),(r=l.sourceEvent)!=null&&r.sync||o([l.transform.x,l.transform.y,l.transform.k]),s&&!((i=l.sourceEvent)!=null&&i.internal)&&(s==null||s(l.sourceEvent,an(l.transform)))}}function Vr({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:s,onPaneContextMenu:l}){return r=>{var i;if(!((i=r.sourceEvent)!=null&&i.internal)&&(t.isZoomingOrPanning=!1,l&&Qo(e,t.mouseButton??0)&&!t.usedRightMouseButton&&r.sourceEvent&&l(r.sourceEvent),t.usedRightMouseButton=!1,o(!1),s&&Ir(t.prevViewport,r.transform))){const u=an(r.transform);t.prevViewport=u,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{s==null||s(r.sourceEvent,u)},n?150:0)}}}function Lr({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:o,panOnScroll:s,zoomOnDoubleClick:l,userSelectionActive:r,noWheelClassName:i,noPanClassName:u,lib:g}){return d=>{var k;const y=t||e,h=n&&d.ctrlKey;if(d.button===1&&d.type==="mousedown"&&(xt(d,`${g}-flow__node`)||xt(d,`${g}-flow__edge`)))return!0;if(!o&&!y&&!s&&!l&&!n||r||xt(d,i)&&d.type==="wheel"||xt(d,u)&&(d.type!=="wheel"||s&&d.type==="wheel"&&!t)||!n&&d.ctrlKey&&d.type==="wheel")return!1;if(!n&&d.type==="touchstart"&&((k=d.touches)==null?void 0:k.length)>1)return d.preventDefault(),!1;if(!y&&!s&&!h&&d.type==="wheel"||!o&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(o)&&!o.includes(d.button)&&d.type==="mousedown")return!1;const w=Array.isArray(o)&&o.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||d.type==="wheel")&&w}}function Br({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:o,translateExtent:s,viewport:l,onPanZoom:r,onPanZoomStart:i,onPanZoomEnd:u,onDraggingChange:g}){const d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},y=t.getBoundingClientRect(),h=Ui().clickDistance(!dt(o)||o<0?0:o).scaleExtent([e,n]).translateExtent(s),w=it(t).call(h);v({x:l.x,y:l.y,zoom:Ct(l.zoom,e,n)},[[0,0],[y.width,y.height]],s);const k=w.on("wheel.zoom"),C=w.on("dblclick.zoom");h.wheelDelta($o);function N(I,L){return w?new Promise(f=>{h==null||h.transform(xn(w,L==null?void 0:L.duration,()=>f(!0)),I)}):Promise.resolve(!1)}function z({noWheelClassName:I,noPanClassName:L,onPaneContextMenu:f,userSelectionActive:M,panOnScroll:m,panOnDrag:_,panOnScrollMode:T,panOnScrollSpeed:H,preventScrolling:R,zoomOnPinch:X,zoomOnScroll:K,zoomOnDoubleClick:U,zoomActivationKeyPressed:W,lib:q,onTransformChange:te}){M&&!d.isZoomingOrPanning&&b();const ie=m&&!W&&!M?Or({zoomPanValues:d,noWheelClassName:I,d3Selection:w,d3Zoom:h,panOnScrollMode:T,panOnScrollSpeed:H,zoomOnPinch:X,onPanZoomStart:i,onPanZoom:r,onPanZoomEnd:u}):Hr({noWheelClassName:I,preventScrolling:R,d3ZoomHandler:k});if(w.on("wheel.zoom",ie,{passive:!1}),!M){const F=Dr({zoomPanValues:d,onDraggingChange:g,onPanZoomStart:i});h.on("start",F);const G=Ar({zoomPanValues:d,panOnDrag:_,onPaneContextMenu:!!f,onPanZoom:r,onTransformChange:te});h.on("zoom",G);const ne=Vr({zoomPanValues:d,panOnDrag:_,panOnScroll:m,onPaneContextMenu:f,onPanZoomEnd:u,onDraggingChange:g});h.on("end",ne)}const re=Lr({zoomActivationKeyPressed:W,panOnDrag:_,zoomOnScroll:K,panOnScroll:m,zoomOnDoubleClick:U,zoomOnPinch:X,userSelectionActive:M,noPanClassName:L,noWheelClassName:I,lib:q});h.filter(re),U?w.on("dblclick.zoom",C):w.on("dblclick.zoom",null)}function b(){h.on("zoom",null)}async function v(I,L,f){const M=wn(I),m=h==null?void 0:h.constrain()(M,L,f);return m&&await N(m),new Promise(_=>_(m))}async function x(I,L){const f=wn(I);return await N(f,L),new Promise(M=>M(f))}function p(I){if(w){const L=wn(I),f=w.property("__zoom");(f.k!==I.zoom||f.x!==I.x||f.y!==I.y)&&(h==null||h.transform(w,L,null,{sync:!0}))}}function S(){const I=w?Oi(w.node()):{x:0,y:0,k:1};return{x:I.x,y:I.y,zoom:I.k}}function P(I,L){return w?new Promise(f=>{h==null||h.scaleTo(xn(w,L==null?void 0:L.duration,()=>f(!0)),I)}):Promise.resolve(!1)}function D(I,L){return w?new Promise(f=>{h==null||h.scaleBy(xn(w,L==null?void 0:L.duration,()=>f(!0)),I)}):Promise.resolve(!1)}function B(I){h==null||h.scaleExtent(I)}function O(I){h==null||h.translateExtent(I)}function Y(I){const L=!dt(I)||I<0?0:I;h==null||h.clickDistance(L)}return{update:z,destroy:b,setViewport:x,setViewportConstrained:v,getViewport:S,scaleTo:P,scaleBy:D,setScaleExtent:B,setTranslateExtent:O,syncViewport:p,setClickDistance:Y}}var wo;(function(t){t.Line="line",t.Handle="handle"})(wo||(wo={}));var Yr=we('<div role="button" tabindex="-1"><!></div>');function Nt(t,e){de(e,!1);const n=()=>Z(U,"$connectable",v),o=()=>Z(ie,"$connectionRadius",v),s=()=>Z(te,"$domNode",v),l=()=>Z(ge,"$nodeLookup",v),r=()=>Z(q,"$connectionMode",v),i=()=>Z(G,"$lib",v),u=()=>Z(Re,"$autoPanOnConnect",v),g=()=>Z(qe,"$flowId",v),d=()=>Z(F,"$isValidConnectionStore",v),y=()=>Z(Ee,"$onedgecreate",v),h=()=>Z(Ae,"$onConnectAction",v),w=()=>Z(xe,"$onConnectStartAction",v),k=()=>Z(Me,"$onConnectEndAction",v),C=()=>Z(re,"$viewport",v),N=()=>Z(Qe,"$connection",v),z=()=>Z(Se,"$edges",v),b=()=>Z(ke,"$connectionLookup",v),[v,x]=Xe(),p=Q(),S=Q(),P=Q(),D=Q(),B=Q(),O=Q(),Y=Q(),I=Q();let L=c(e,"id",8,void 0),f=c(e,"type",8,"source"),M=c(e,"position",24,()=>oe.Top),m=c(e,"style",8,void 0),_=c(e,"isValidConnection",8,void 0),T=c(e,"onconnect",8,void 0),H=c(e,"ondisconnect",8,void 0),R=c(e,"isConnectable",8,void 0),X=c(e,"class",8,void 0);const K=zt("svelteflow__node_id"),U=zt("svelteflow__node_connectable"),W=Oe(),{connectionMode:q,domNode:te,nodeLookup:ge,connectionRadius:ie,viewport:re,isValidConnection:F,lib:G,addEdge:ne,onedgecreate:Ee,panBy:Ne,cancelConnection:ze,updateConnection:Ce,autoPanOnConnect:Re,edges:Se,connectionLookup:ke,onconnect:Ae,onconnectstart:xe,onconnectend:Me,flowId:qe,connection:Qe}=W;function lt(Le){const Ge=Lo(Le);(Ge&&Le.button===0||!Ge)&&Tr.onPointerDown(Le,{handleId:a(P),nodeId:K,isTarget:a(p),connectionRadius:o(),domNode:s(),nodeLookup:l(),connectionMode:r(),lib:i(),autoPanOnConnect:u(),flowId:g(),isValidConnection:_()??d(),updateConnection:Ce,cancelConnection:ze,panBy:Ne,onConnect:Be=>{var at;const je=y()?y()(Be):Be;je&&(ne(je),(at=h())==null||at(Be))},onConnectStart:(Be,je)=>{var at;(at=w())==null||at(Be,{nodeId:je.nodeId,handleId:je.handleId,handleType:je.handleType})},onConnectEnd:(Be,je)=>{var at;(at=k())==null||at(Be,je)},getTransform:()=>[C().x,C().y,C().zoom],getFromHandle:()=>N().fromHandle})}let ve=Q(null),Te=Q();ee(()=>E(f()),()=>{j(p,f()==="target")}),ee(()=>(E(R()),n()),()=>{j(S,R()!==void 0?R():n())}),ee(()=>E(L()),()=>{j(P,L()||null)}),ee(()=>(E(T()),E(H()),z(),b(),E(f()),E(L())),()=>{(T()||H())&&(z(),j(Te,b().get(`${K}-${f()}-${L()||null}`)))}),ee(()=>(a(ve),a(Te),E(H()),E(T())),()=>{if(a(ve)&&!qi(a(Te),a(ve))){const Le=a(Te)??new Map;oo(a(ve),Le,H()),oo(Le,a(ve),T())}j(ve,a(Te)??new Map)}),ee(()=>N(),()=>{j(D,!!N().fromHandle)}),ee(()=>(N(),E(f()),a(P)),()=>{var Le,Ge,Be;j(B,((Le=N().fromHandle)==null?void 0:Le.nodeId)===K&&((Ge=N().fromHandle)==null?void 0:Ge.type)===f()&&((Be=N().fromHandle)==null?void 0:Be.id)===a(P))}),ee(()=>(N(),E(f()),a(P)),()=>{var Le,Ge,Be;j(O,((Le=N().toHandle)==null?void 0:Le.nodeId)===K&&((Ge=N().toHandle)==null?void 0:Ge.type)===f()&&((Be=N().toHandle)==null?void 0:Be.id)===a(P))}),ee(()=>(r(),N(),E(f()),a(P)),()=>{var Le,Ge,Be;j(Y,r()===vt.Strict?((Le=N().fromHandle)==null?void 0:Le.type)!==f():K!==((Ge=N().fromHandle)==null?void 0:Ge.nodeId)||a(P)!==((Be=N().fromHandle)==null?void 0:Be.id))}),ee(()=>(a(O),N()),()=>{j(I,a(O)&&N().isValid)}),We(),fe();var Ve=Yr();let tt;var Zt=ae(Ve);Fe(Zt,e,"default",{},null),se(Ve),be(Le=>{le(Ve,"data-handleid",a(P)),le(Ve,"data-nodeid",K),le(Ve,"data-handlepos",M()),le(Ve,"data-id",`${g()??""}-${K??""}-${(L()||"")??""}-${f()??""}`),tt=Je(Ve,1,Le,null,tt,{valid:a(I),connectingto:a(O),connectingfrom:a(B),source:!a(p),target:a(p),connectablestart:a(S),connectableend:a(S),connectable:a(S),connectionindicator:a(S)&&(!a(D)||a(Y))}),rt(Ve,m())},[()=>et((E(Pe),E(M()),E(X()),V(()=>Pe(["svelte-flow__handle",`svelte-flow__handle-${M()}`,"nodrag","nopan",M(),X()]))))]),_e("mousedown",Ve,lt),_e("touchstart",Ve,lt),J(t,Ve),ue(),x()}var Xr=we("<!> <!>",1);function Mn(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","targetPosition","sourcePosition"]),de(e,!1);let o=c(e,"data",24,()=>({label:"Node"})),s=c(e,"targetPosition",8,void 0),l=c(e,"sourcePosition",8,void 0);fe();var r=Xr(),i=De(r);{let d=ce(()=>(E(s()),E(oe),V(()=>s()??oe.Top)));Nt(i,{type:"target",get position(){return a(d)}})}var u=me(i),g=me(u);{let d=ce(()=>(E(l()),E(oe),V(()=>l()??oe.Bottom)));Nt(g,{type:"source",get position(){return a(d)}})}be(()=>ot(u,` ${E(o()),V(()=>{var d;return(d=o())==null?void 0:d.label})??""} `)),J(t,r),ue()}var Rr=we(" <!>",1);function Kr(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","sourcePosition"]),de(e,!1);let o=c(e,"data",24,()=>({label:"Node"})),s=c(e,"sourcePosition",8,void 0);fe(),Tn();var l=Rr(),r=De(l),i=me(r);{let u=ce(()=>(E(s()),E(oe),V(()=>s()??oe.Bottom)));Nt(i,{type:"source",get position(){return a(u)}})}be(()=>ot(r,`${E(o()),V(()=>{var u;return(u=o())==null?void 0:u.label})??""} `)),J(t,l),ue()}var Wr=we(" <!>",1);function Zr(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["data","targetPosition"]),de(e,!1);let o=c(e,"data",24,()=>({label:"Node"})),s=c(e,"targetPosition",8,void 0);fe(),Tn();var l=Wr(),r=De(l),i=me(r);{let u=ce(()=>(E(s()),E(oe),V(()=>s()??oe.Top)));Nt(i,{type:"target",get position(){return a(u)}})}be(()=>ot(r,`${E(o()),V(()=>{var u;return(u=o())==null?void 0:u.label})??""} `)),J(t,l),ue()}function Fr(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,[])}function xo(t,e,n){if(!e)return;const o=n?e.querySelector(n):e;o&&o.appendChild(t)}function pn(t,{target:e,domNode:n}){return xo(t,n,e),{async update({target:o,domNode:s}){xo(t,s,o)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}var Gr=we("<div><!></div>");function jr(t,e){de(e,!1);const n=()=>Z(l,"$domNode",o),[o,s]=Xe(),{domNode:l}=Oe();fe();var r=Gr(),i=ae(r);Fe(i,e,"default",{},null),se(r),Ue(r,(u,g)=>pn==null?void 0:pn(u,g),()=>({target:".svelte-flow__edgelabel-renderer",domNode:n()})),J(t,r),ue(),s()}function ei(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:o,addSelectedEdges:s,unselectNodesAndEdges:l,elementsSelectable:r}=Oe();return i=>{const u=A(t).get(i);if(!u){console.warn("012",Kt.error012(i));return}(u.selectable||A(r)&&typeof u.selectable>"u")&&(e.set(null),n.set(null),u.selected?u.selected&&A(o)&&l({nodes:[],edges:[u]}):s([i]))}}var Ur=we('<div class="svelte-flow__edge-label" role="button" tabindex="-1"><!></div>');function qr(t,e){de(e,!1);let n=c(e,"style",8,void 0),o=c(e,"x",8,void 0),s=c(e,"y",8,void 0);const l=ei(),r=zt("svelteflow__edge_id");fe(),jr(t,{children:(i,u)=>{var g=Ur();let d;var y=ae(g);Fe(y,e,"default",{},null),se(g),be(()=>d=rt(g,"pointer-events: all;"+n(),d,{transform:`translate(-50%, -50%) translate(${o()??""}px,${s()??""}px)`})),_e("keyup",g,()=>{}),_e("click",g,()=>{r&&l(r)}),J(i,g)},$$slots:{default:!0}}),ue()}var Jr=Ye('<path fill="none" class="svelte-flow__edge-interaction"></path>'),Qr=Ye('<path fill="none"></path><!><!>',1);function cn(t,e){de(e,!1);let n=c(e,"id",8,void 0),o=c(e,"path",8),s=c(e,"label",8,void 0),l=c(e,"labelX",8,void 0),r=c(e,"labelY",8,void 0),i=c(e,"labelStyle",8,void 0),u=c(e,"markerStart",8,void 0),g=c(e,"markerEnd",8,void 0),d=c(e,"style",8,void 0),y=c(e,"interactionWidth",8,20),h=c(e,"class",8,void 0),w=y()===void 0?20:y();fe();var k=Qr(),C=De(k),N=me(C);{var z=x=>{var p=Jr();le(p,"stroke-opacity",0),be(()=>{le(p,"d",o()),le(p,"stroke-width",w)}),J(x,p)};He(N,x=>{w&&x(z)})}var b=me(N);{var v=x=>{qr(x,{get x(){return l()},get y(){return r()},get style(){return i()},children:(p,S)=>{Tn();var P=ki();be(()=>ot(P,s())),J(p,P)},$$slots:{default:!0}})};He(b,x=>{s()&&x(v)})}be(x=>{le(C,"id",n()),le(C,"d",o()),Je(C,0,x),le(C,"marker-start",u()),le(C,"marker-end",g()),rt(C,d())},[()=>et((E(Pe),E(h()),V(()=>Pe(["svelte-flow__edge-path",h()]))))]),J(t,k),ue()}function Nn(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),de(e,!1);const o=Q(),s=Q(),l=Q();let r=c(e,"label",8,void 0),i=c(e,"labelStyle",8,void 0),u=c(e,"style",8,void 0),g=c(e,"markerStart",8,void 0),d=c(e,"markerEnd",8,void 0),y=c(e,"interactionWidth",8,void 0),h=c(e,"sourceX",8),w=c(e,"sourceY",8),k=c(e,"sourcePosition",8),C=c(e,"targetX",8),N=c(e,"targetY",8),z=c(e,"targetPosition",8);ee(()=>(a(o),a(s),a(l),E(h()),E(w()),E(C()),E(N()),E(k()),E(z())),()=>{(b=>{var v=yt(b,3);j(o,v[0]),j(s,v[1]),j(l,v[2])})(Bo({sourceX:h(),sourceY:w(),targetX:C(),targetY:N(),sourcePosition:k(),targetPosition:z()}))}),We(),fe(),cn(t,{get path(){return a(o)},get labelX(){return a(s)},get labelY(){return a(l)},get label(){return r()},get labelStyle(){return i()},get markerStart(){return g()},get markerEnd(){return d()},get interactionWidth(){return y()},get style(){return u()}}),ue()}function $r(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),de(e,!1);const o=Q(),s=Q(),l=Q();let r=c(e,"label",8,void 0),i=c(e,"labelStyle",8,void 0),u=c(e,"style",8,void 0),g=c(e,"markerStart",8,void 0),d=c(e,"markerEnd",8,void 0),y=c(e,"interactionWidth",8,void 0),h=c(e,"sourceX",8),w=c(e,"sourceY",8),k=c(e,"sourcePosition",8),C=c(e,"targetX",8),N=c(e,"targetY",8),z=c(e,"targetPosition",8);ee(()=>(a(o),a(s),a(l),E(h()),E(w()),E(C()),E(N()),E(k()),E(z())),()=>{(b=>{var v=yt(b,3);j(o,v[0]),j(s,v[1]),j(l,v[2])})(tn({sourceX:h(),sourceY:w(),targetX:C(),targetY:N(),sourcePosition:k(),targetPosition:z()}))}),We(),fe(),cn(t,{get path(){return a(o)},get labelX(){return a(s)},get labelY(){return a(l)},get label(){return r()},get labelStyle(){return i()},get markerStart(){return g()},get markerEnd(){return d()},get interactionWidth(){return y()},get style(){return u()}}),ue()}function es(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","targetX","targetY"]),de(e,!1);const o=Q(),s=Q(),l=Q();let r=c(e,"label",8,void 0),i=c(e,"labelStyle",8,void 0),u=c(e,"style",8,void 0),g=c(e,"markerStart",8,void 0),d=c(e,"markerEnd",8,void 0),y=c(e,"interactionWidth",8,void 0),h=c(e,"sourceX",8),w=c(e,"sourceY",8),k=c(e,"targetX",8),C=c(e,"targetY",8);ee(()=>(a(o),a(s),a(l),E(h()),E(w()),E(k()),E(C())),()=>{(N=>{var z=yt(N,3);j(o,z[0]),j(s,z[1]),j(l,z[2])})(Cn({sourceX:h(),sourceY:w(),targetX:k(),targetY:C()}))}),We(),fe(),cn(t,{get path(){return a(o)},get labelX(){return a(s)},get labelY(){return a(l)},get label(){return r()},get labelStyle(){return i()},get markerStart(){return g()},get markerEnd(){return d()},get interactionWidth(){return y()},get style(){return u()}}),ue()}function ts(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]);Ie(n,["label","labelStyle","style","markerStart","markerEnd","interactionWidth","sourceX","sourceY","sourcePosition","targetX","targetY","targetPosition"]),de(e,!1);const o=Q(),s=Q(),l=Q();let r=c(e,"label",8,void 0),i=c(e,"labelStyle",8,void 0),u=c(e,"style",8,void 0),g=c(e,"markerStart",8,void 0),d=c(e,"markerEnd",8,void 0),y=c(e,"interactionWidth",8,void 0),h=c(e,"sourceX",8),w=c(e,"sourceY",8),k=c(e,"sourcePosition",8),C=c(e,"targetX",8),N=c(e,"targetY",8),z=c(e,"targetPosition",8);ee(()=>(a(o),a(s),a(l),E(h()),E(w()),E(C()),E(N()),E(k()),E(z())),()=>{(b=>{var v=yt(b,3);j(o,v[0]),j(s,v[1]),j(l,v[2])})(tn({sourceX:h(),sourceY:w(),targetX:C(),targetY:N(),sourcePosition:k(),targetPosition:z(),borderRadius:0}))}),We(),fe(),cn(t,{get path(){return a(o)},get labelX(){return a(s)},get labelY(){return a(l)},get label(){return r()},get labelStyle(){return i()},get markerStart(){return g()},get markerEnd(){return d()},get interactionWidth(){return y()},get style(){return u()}}),ue()}function ns(t,e){const n=t.set,o=e.set,s=A(t),l=A(e);let i=s.length===0&&l.length>0?l:s;t.set(i);const u=g=>{const d=n(g);return i=d,o(i),d};t.set=e.set=u,t.update=e.update=g=>u(g(i))}function os(t,e){const n=t.set,o=e.set;let s=A(e);t.set(s);const l=r=>{n(r),o(r),s=r};t.set=e.set=l,t.update=e.update=r=>l(r(s))}const is=(t,e,n)=>{if(!n)return;const o=A(t),s=e.set,l=n.set;let r=n?A(n):{x:0,y:0,zoom:1};e.set(r),e.set=i=>(s(i),l(i),r=i,i),n.set=i=>(o==null||o.syncViewport(i),s(i),l(i),r=i,i),e.update=i=>{e.set(i(r))},n.update=i=>{n.set(i(r))}},rs=(t,e,n,o=[0,0],s=Jt)=>{const{subscribe:l,set:r,update:i}=$([]);let u=t,g={},d=!0;const y=C=>(Ko(C,e,n,{elevateNodesOnSelect:d,nodeOrigin:o,nodeExtent:s,defaults:g,checkEquality:!1}),u=C,r(u),u),h=C=>y(C(u)),w=C=>{g=C},k=C=>{d=C.elevateNodesOnSelect??d};return y(u),{subscribe:l,set:y,update:h,setDefaultOptions:w,setOptions:k}},ss=(t,e,n,o)=>{const{subscribe:s,set:l,update:r}=$([]);let i=t,u={};const g=h=>{const w=u?h.map(k=>({...u,...k})):h;Fo(e,n,w),i=w,l(i)},d=h=>g(h(i)),y=h=>{u=h};return g(i),{subscribe:s,set:g,update:d,setDefaultOptions:y}},ti={input:Kr,output:Zr,default:Mn,group:Fr},ni={straight:es,smoothstep:$r,default:Nn,step:ts},ls=({nodes:t=[],edges:e=[],width:n,height:o,fitView:s,nodeOrigin:l,nodeExtent:r})=>{const i=new Map,u=new Map,g=new Map,d=new Map,y=l??[0,0],h=r??Jt;Ko(t,i,u,{nodeExtent:h,nodeOrigin:y,elevateNodesOnSelect:!1,checkEquality:!1}),Fo(g,d,e);let w={x:0,y:0,zoom:1};if(s&&n&&o){const k=rn(i,{filter:C=>!!((C.width||C.initialWidth)&&(C.height||C.initialHeight))});w=Ln(k,n,o,.5,2,.1)}return{flowId:$(null),nodes:rs(t,i,u,y,h),nodeLookup:nt(i),parentLookup:nt(u),edgeLookup:nt(d),visibleNodes:nt([]),edges:ss(e,g,d),visibleEdges:nt([]),connectionLookup:nt(g),height:$(500),width:$(500),minZoom:$(.5),maxZoom:$(2),nodeOrigin:$(y),nodeDragThreshold:$(1),nodeExtent:$(h),translateExtent:$(Jt),autoPanOnNodeDrag:$(!0),autoPanOnConnect:$(!0),fitViewOnInit:$(!1),fitViewOnInitDone:$(!1),fitViewOptions:$(void 0),panZoom:$(null),snapGrid:$(null),dragging:$(!1),selectionRect:$(null),selectionKeyPressed:$(!1),multiselectionKeyPressed:$(!1),deleteKeyPressed:$(!1),panActivationKeyPressed:$(!1),zoomActivationKeyPressed:$(!1),selectionRectMode:$(null),selectionMode:$(Qt.Partial),nodeTypes:$(ti),edgeTypes:$(ni),viewport:$(w),connectionMode:$(vt.Strict),domNode:$(null),connection:nt(En),connectionLineType:$(Et.Bezier),connectionRadius:$(20),isValidConnection:$(()=>!0),nodesDraggable:$(!0),nodesConnectable:$(!0),elementsSelectable:$(!0),selectNodesOnDrag:$(!0),markers:nt([]),defaultMarkerColor:$("#b1b1b7"),lib:nt("svelte"),onlyRenderVisibleElements:$(!1),onerror:$(nr),ondelete:$(void 0),onedgecreate:$(void 0),onconnect:$(void 0),onconnectstart:$(void 0),onconnectend:$(void 0),onbeforedelete:$(void 0),nodesInitialized:$(!1),edgesInitialized:$(!1),viewportInitialized:$(!1),initialized:nt(!1)}};function as(t){const e=_t([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,o,s,l,r,i])=>s&&r&&i?n.filter(g=>{const d=o.get(g.source),y=o.get(g.target);return d&&y&&cr({sourceNode:d,targetNode:y,width:r,height:i,transform:[l.x,l.y,l.zoom]})}):n);return _t([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,o,s,l])=>n.reduce((i,u)=>{const g=o.get(u.source),d=o.get(u.target);if(!g||!d)return i;const y=yr({id:u.id,sourceNode:g,targetNode:d,sourceHandle:u.sourceHandle||null,targetHandle:u.targetHandle||null,connectionMode:s,onError:l});return y&&i.push({...u,zIndex:ar({selected:u.selected,zIndex:u.zIndex,sourceNode:g,targetNode:d,elevateOnSelect:!1}),...y}),i},[]))}function cs(t){return _t([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,o,s,l])=>{const r=[l.x,l.y,l.zoom];return n?Io(e,{x:0,y:0,width:o,height:s},r,!0):Array.from(e.values())})}const dn=Symbol();function oi({nodes:t,edges:e,width:n,height:o,fitView:s,nodeOrigin:l,nodeExtent:r}){const i=ls({nodes:t,edges:e,width:n,height:o,fitView:s,nodeOrigin:l,nodeExtent:r});function u(m){i.nodeTypes.set({...ti,...m})}function g(m){i.edgeTypes.set({...ni,...m})}function d(m){const _=A(i.edges);i.edges.set(fr(m,_))}const y=(m,_=!1)=>{var H;const T=A(i.nodeLookup);for(const[R,X]of m){const K=(H=T.get(R))==null?void 0:H.internals.userNode;K&&(K.position=X.position,K.dragging=_)}i.nodes.update(R=>R)};function h(m){var R,X,K;const _=A(i.nodeLookup),{changes:T,updatedInternals:H}=_r(m,_,A(i.parentLookup),A(i.domNode),A(i.nodeOrigin));if(H){if(!A(i.fitViewOnInitDone)&&A(i.fitViewOnInit)){const U=A(i.fitViewOptions),W=k({...U,nodes:U==null?void 0:U.nodes});i.fitViewOnInitDone.set(W)}for(const U of T){const W=(R=_.get(U.id))==null?void 0:R.internals.userNode;if(W)switch(U.type){case"dimensions":{const q={...W.measured,...U.dimensions};U.setAttributes&&(W.width=((X=U.dimensions)==null?void 0:X.width)??W.width,W.height=((K=U.dimensions)==null?void 0:K.height)??W.height),W.measured=q;break}case"position":W.position=U.position??W.position;break}}i.nodes.update(U=>U),A(i.nodesInitialized)||i.nodesInitialized.set(!0)}}function w(m){const _=A(i.panZoom);if(!_)return Promise.resolve(!1);const T=ro(A(i.nodeLookup),m);return so({nodes:T,width:A(i.width),height:A(i.height),minZoom:A(i.minZoom),maxZoom:A(i.maxZoom),panZoom:_},m)}function k(m){const _=A(i.panZoom);if(!_)return!1;const T=ro(A(i.nodeLookup),m);return so({nodes:T,width:A(i.width),height:A(i.height),minZoom:A(i.minZoom),maxZoom:A(i.maxZoom),panZoom:_},m),T.size>0}function C(m,_){const T=A(i.panZoom);return T?T.scaleBy(m,_):Promise.resolve(!1)}function N(m){return C(1.2,m)}function z(m){return C(1/1.2,m)}function b(m){const _=A(i.panZoom);_&&(_.setScaleExtent([m,A(i.maxZoom)]),i.minZoom.set(m))}function v(m){const _=A(i.panZoom);_&&(_.setScaleExtent([A(i.minZoom),m]),i.maxZoom.set(m))}function x(m){const _=A(i.panZoom);_&&(_.setTranslateExtent(m),i.translateExtent.set(m))}function p(m){let _=!1;return m.forEach(T=>{T.selected&&(T.selected=!1,_=!0)}),_}function S(m){var _;(_=A(i.panZoom))==null||_.setClickDistance(m)}function P(m){p((m==null?void 0:m.nodes)||A(i.nodes))&&i.nodes.set(A(i.nodes)),p((m==null?void 0:m.edges)||A(i.edges))&&i.edges.set(A(i.edges))}i.deleteKeyPressed.subscribe(async m=>{var _;if(m){const T=A(i.nodes),H=A(i.edges),R=T.filter(W=>W.selected),X=H.filter(W=>W.selected),{nodes:K,edges:U}=await Oo({nodesToRemove:R,edgesToRemove:X,nodes:T,edges:H,onBeforeDelete:A(i.onbeforedelete)});(K.length||U.length)&&(i.nodes.update(W=>W.filter(q=>!K.some(te=>te.id===q.id))),i.edges.update(W=>W.filter(q=>!U.some(te=>te.id===q.id))),(_=A(i.ondelete))==null||_({nodes:K,edges:U}))}});function D(m){const _=A(i.multiselectionKeyPressed);i.nodes.update(T=>T.map(H=>{const R=m.includes(H.id),X=_&&H.selected||R;return H.selected=X,H})),_||i.edges.update(T=>T.map(H=>(H.selected=!1,H)))}function B(m){const _=A(i.multiselectionKeyPressed);i.edges.update(T=>T.map(H=>{const R=m.includes(H.id),X=_&&H.selected||R;return H.selected=X,H})),_||i.nodes.update(T=>T.map(H=>(H.selected=!1,H)))}function O(m){var T;const _=(T=A(i.nodes))==null?void 0:T.find(H=>H.id===m);if(!_){console.warn("012",Kt.error012(m));return}i.selectionRect.set(null),i.selectionRectMode.set(null),_.selected?_.selected&&A(i.multiselectionKeyPressed)&&P({nodes:[_],edges:[]}):D([m])}function Y(m){const _=A(i.viewport);return kr({delta:m,panZoom:A(i.panZoom),transform:[_.x,_.y,_.zoom],translateExtent:A(i.translateExtent),width:A(i.width),height:A(i.height)})}const I=$(En),L=m=>{I.set({...m})};function f(){I.set(En)}function M(){i.fitViewOnInitDone.set(!1),i.selectionRect.set(null),i.selectionRectMode.set(null),i.snapGrid.set(null),i.isValidConnection.set(()=>!0),P(),f()}return{...i,visibleEdges:as(i),visibleNodes:cs(i),connection:_t([I,i.viewport],([m,_])=>m.inProgress?{...m,to:Wt(m.to,[_.x,_.y,_.zoom])}:{...m}),markers:_t([i.edges,i.defaultMarkerColor,i.flowId],([m,_,T])=>vr(m,{defaultColor:_,id:T})),initialized:(()=>{let m=!1;const _=A(i.nodes).length,T=A(i.edges).length;return _t([i.nodesInitialized,i.edgesInitialized,i.viewportInitialized],([H,R,X])=>m||(_===0?m=X:T===0?m=X&&H:m=X&&H&&R,m))})(),syncNodeStores:m=>ns(i.nodes,m),syncEdgeStores:m=>os(i.edges,m),syncViewport:m=>is(i.panZoom,i.viewport,m),setNodeTypes:u,setEdgeTypes:g,addEdge:d,updateNodePositions:y,updateNodeInternals:h,zoomIn:N,zoomOut:z,fitView:m=>w(m),setMinZoom:b,setMaxZoom:v,setTranslateExtent:x,setPaneClickDistance:S,unselectNodesAndEdges:P,addSelectedNodes:D,addSelectedEdges:B,handleNodeSelection:O,panBy:Y,updateConnection:L,cancelConnection:f,reset:M}}function Oe(){const t=zt(dn);if(!t)throw new Error("In order to use useStore you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}function ds({nodes:t,edges:e,width:n,height:o,fitView:s,nodeOrigin:l,nodeExtent:r}){const i=oi({nodes:t,edges:e,width:n,height:o,fitView:s,nodeOrigin:l,nodeExtent:r});return Vt(dn,{getStore:()=>i}),i}function _n(t,e){const{panZoom:n,minZoom:o,maxZoom:s,initialViewport:l,viewport:r,dragging:i,translateExtent:u,paneClickDistance:g}=e,d=Br({domNode:t,minZoom:o,maxZoom:s,translateExtent:u,viewport:l,paneClickDistance:g,onDraggingChange:i.set}),y=d.getViewport();return r.set(y),n.set(d),d.update(e),{update(h){d.update(h)}}}var us=we('<div class="svelte-flow__zoom svelte-1vl0uat"><!></div>');function fs(t,e){de(e,!1);const n=()=>Z(T,"$panActivationKeyPressed",g),o=()=>Z(L,"$minZoom",g),s=()=>Z(f,"$maxZoom",g),l=()=>Z(H,"$zoomActivationKeyPressed",g),r=()=>Z(I,"$selectionRect",g),i=()=>Z(m,"$translateExtent",g),u=()=>Z(_,"$lib",g),[g,d]=Xe(),y=Q(),h=Q(),w=Q();let k=c(e,"initialViewport",8,void 0),C=c(e,"onMoveStart",8,void 0),N=c(e,"onMove",8,void 0),z=c(e,"onMoveEnd",8,void 0),b=c(e,"panOnScrollMode",8),v=c(e,"preventScrolling",8),x=c(e,"zoomOnScroll",8),p=c(e,"zoomOnDoubleClick",8),S=c(e,"zoomOnPinch",8),P=c(e,"panOnDrag",8),D=c(e,"panOnScroll",8),B=c(e,"paneClickDistance",8);const{viewport:O,panZoom:Y,selectionRect:I,minZoom:L,maxZoom:f,dragging:M,translateExtent:m,lib:_,panActivationKeyPressed:T,zoomActivationKeyPressed:H,viewportInitialized:R}=Oe(),X=W=>O.set({x:W[0],y:W[1],zoom:W[2]});Rt(()=>{qt(R,!0)}),ee(()=>E(k()),()=>{j(y,k()||{x:0,y:0,zoom:1})}),ee(()=>(n(),E(P())),()=>{j(h,n()||P())}),ee(()=>(n(),E(D())),()=>{j(w,n()||D())}),We(),fe();var K=us(),U=ae(K);Fe(U,e,"default",{},null),se(K),Ue(K,(W,q)=>_n==null?void 0:_n(W,q),()=>({viewport:O,minZoom:o(),maxZoom:s(),initialViewport:a(y),dragging:M,panZoom:Y,onPanZoomStart:C(),onPanZoom:N(),onPanZoomEnd:z(),zoomOnScroll:x(),zoomOnDoubleClick:p(),zoomOnPinch:S(),panOnScroll:a(w),panOnDrag:a(h),panOnScrollSpeed:.5,panOnScrollMode:b()||gt.Free,zoomActivationKeyPressed:l(),preventScrolling:typeof v()=="boolean"?v():!0,noPanClassName:"nopan",noWheelClassName:"nowheel",userSelectionActive:!!r(),translateExtent:i(),lib:u(),paneClickDistance:B(),onTransformChange:X})),J(t,K),ue(),d()}function po(t,e){return n=>{n.target===e&&(t==null||t(n))}}function _o(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}var gs=we("<div><!></div>");function hs(t,e){de(e,!1);const n=()=>Z(f,"$panActivationKeyPressed",h),o=()=>Z(I,"$selectionKeyPressed",h),s=()=>Z(O,"$selectionRect",h),l=()=>Z(B,"$elementsSelectable",h),r=()=>Z(Y,"$selectionRectMode",h),i=()=>Z(S,"$edges",h),u=()=>Z(p,"$nodeLookup",h),g=()=>Z(P,"$viewport",h),d=()=>Z(L,"$selectionMode",h),y=()=>Z(D,"$dragging",h),[h,w]=Xe(),k=Q(),C=Q(),N=Q();let z=c(e,"panOnDrag",8,void 0),b=c(e,"selectionOnDrag",8,void 0);const v=bt(),{nodes:x,nodeLookup:p,edges:S,viewport:P,dragging:D,elementsSelectable:B,selectionRect:O,selectionRectMode:Y,selectionKeyPressed:I,selectionMode:L,panActivationKeyPressed:f,unselectNodesAndEdges:M}=Oe();let m=Q(),_=null,T=[],H=!1;function R(F){if(H){H=!1;return}v("paneclick",{event:F}),M(),Y.set(null)}function X(F){var Ee,Ne;if(_=a(m).getBoundingClientRect(),!B||!a(C)||F.button!==0||F.target!==a(m)||!_)return;(Ne=(Ee=F.target)==null?void 0:Ee.setPointerCapture)==null||Ne.call(Ee,F.pointerId);const{x:G,y:ne}=ht(F,_);M(),O.set({width:0,height:0,startX:G,startY:ne,x:G,y:ne})}function K(F){if(!a(C)||!_||!s())return;H=!0;const G=ht(F,_),ne=s().startX??0,Ee=s().startY??0,Ne={...s(),x:G.x<ne?G.x:ne,y:G.y<Ee?G.y:Ee,width:Math.abs(G.x-ne),height:Math.abs(G.y-Ee)},ze=T.map(ke=>ke.id),Ce=Pn(T,i()).map(ke=>ke.id);T=Io(u(),Ne,[g().x,g().y,g().zoom],d()===Qt.Partial,!0);const Re=Pn(T,i()).map(ke=>ke.id),Se=T.map(ke=>ke.id);(ze.length!==Se.length||Se.some(ke=>!ze.includes(ke)))&&x.update(ke=>ke.map(_o(Se))),(Ce.length!==Re.length||Re.some(ke=>!Ce.includes(ke)))&&S.update(ke=>ke.map(_o(Re))),Y.set("user"),O.set(Ne)}function U(F){var G,ne;F.button===0&&((ne=(G=F.target)==null?void 0:G.releasePointerCapture)==null||ne.call(G,F.pointerId),!a(C)&&r()==="user"&&F.target===a(m)&&(R==null||R(F)),O.set(null),T.length>0&&qt(Y,"nodes"),o()&&(H=!1))}const W=F=>{var G;if(Array.isArray(a(k))&&((G=a(k))!=null&&G.includes(2))){F.preventDefault();return}v("panecontextmenu",{event:F})};ee(()=>(n(),E(z())),()=>{j(k,n()||z())}),ee(()=>(o(),s(),E(b()),a(k)),()=>{j(C,o()||s()||b()&&a(k)!==!0)}),ee(()=>(l(),a(C),r()),()=>{j(N,l()&&(a(C)||r()==="user"))}),We(),fe();var q=gs(),te=Jn(()=>a(N)?void 0:po(R,a(m))),ge=Jn(()=>po(W,a(m)));let ie;var re=ae(q);Fe(re,e,"default",{},null),se(q),Hn(q,F=>j(m,F),()=>a(m)),be(F=>ie=Je(q,1,"svelte-flow__pane svelte-j55c5z",null,ie,F),[()=>({draggable:z()===!0||Array.isArray(z())&&z().includes(0),dragging:y(),selection:a(C)})]),_e("click",q,function(...F){var G;(G=a(te))==null||G.apply(this,F)}),_e("pointerdown",q,function(...F){var G;(G=a(N)?X:void 0)==null||G.apply(this,F)}),_e("pointermove",q,function(...F){var G;(G=a(N)?K:void 0)==null||G.apply(this,F)}),_e("pointerup",q,function(...F){var G;(G=a(N)?U:void 0)==null||G.apply(this,F)}),_e("contextmenu",q,function(...F){var G;(G=a(ge))==null||G.apply(this,F)}),J(t,q),ue(),w()}var ms=we('<div class="svelte-flow__viewport xyflow__viewport svelte-tjeeg3"><!></div>');function ys(t,e){de(e,!1);const n=()=>Z(l,"$viewport",o),[o,s]=Xe(),{viewport:l}=Oe();fe();var r=ms(),i=ae(r);Fe(i,e,"default",{},null),se(r),be(()=>rt(r,`transform: translate(${n().x??""}px, ${n().y??""}px) scale(${n().zoom??""})`)),J(t,r),ue(),s()}function Pt(t,e){const{store:n,onDrag:o,onDragStart:s,onDragStop:l,onNodeMouseDown:r}=e,i=Pr({onDrag:o,onDragStart:s,onDragStop:l,onNodeMouseDown:r,getStoreItems:()=>{const g=A(n.snapGrid),d=A(n.viewport);return{nodes:A(n.nodes),nodeLookup:A(n.nodeLookup),edges:A(n.edges),nodeExtent:A(n.nodeExtent),snapGrid:g||[0,0],snapToGrid:!!g,nodeOrigin:A(n.nodeOrigin),multiSelectionActive:A(n.multiselectionKeyPressed),domNode:A(n.domNode),transform:[d.x,d.y,d.zoom],autoPanOnNodeDrag:A(n.autoPanOnNodeDrag),nodesDraggable:A(n.nodesDraggable),selectNodesOnDrag:A(n.selectNodesOnDrag),nodeDragThreshold:A(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function u(g,d){if(d.disabled){i.destroy();return}i.update({domNode:g,noDragClassName:d.noDragClass,handleSelector:d.handleSelector,nodeId:d.nodeId,isSelectable:d.isSelectable,nodeClickDistance:d.nodeClickDistance})}return u(t,e),{update(g){u(t,g)},destroy(){i.destroy()}}}function vs({width:t,height:e,initialWidth:n,initialHeight:o,measuredWidth:s,measuredHeight:l}){if(s===void 0&&l===void 0){const r=t??n,i=e??o;return{width:r?`width:${r}px;`:"",height:i?`height:${i}px;`:""}}return{width:t?`width:${t}px;`:"",height:e?`height:${e}px;`:""}}var bs=we("<div><!></div>");function ws(t,e){de(e,!1);const n=()=>Z(q,"$nodeTypes",s),o=()=>Z(Ee,"$connectableStore",s),[s,l]=Xe(),r=Q(void 0,!0),i=Q(void 0,!0),u=Q(void 0,!0),g=Q(void 0,!0);let d=c(e,"node",9),y=c(e,"id",9),h=c(e,"data",25,()=>({})),w=c(e,"selected",9,!1),k=c(e,"draggable",9,void 0),C=c(e,"selectable",9,void 0),N=c(e,"connectable",9,!0),z=c(e,"deletable",9,!0),b=c(e,"hidden",9,!1),v=c(e,"dragging",9,!1),x=c(e,"resizeObserver",9,null),p=c(e,"style",9,void 0),S=c(e,"type",9,"default"),P=c(e,"isParent",9,!1),D=c(e,"positionX",9),B=c(e,"positionY",9),O=c(e,"sourcePosition",9,void 0),Y=c(e,"targetPosition",9,void 0),I=c(e,"zIndex",9),L=c(e,"measuredWidth",9,void 0),f=c(e,"measuredHeight",9,void 0),M=c(e,"initialWidth",9,void 0),m=c(e,"initialHeight",9,void 0),_=c(e,"width",9,void 0),T=c(e,"height",9,void 0),H=c(e,"dragHandle",9,void 0),R=c(e,"initialized",9,!1),X=c(e,"parentId",9,void 0),K=c(e,"nodeClickDistance",9,void 0),U=c(e,"class",9,"");const W=Oe(),{nodeTypes:q,nodeDragThreshold:te,selectNodesOnDrag:ge,handleNodeSelection:ie,updateNodeInternals:re}=W;let F=Q(void 0,!0),G=Q(null,!0);const ne=bt(),Ee=$(N());let Ne=Q(void 0,!0),ze=Q(void 0,!0),Ce=Q(void 0,!0);Vt("svelteflow__node_id",y()),Vt("svelteflow__node_connectable",Ee),nn(()=>{var xe;a(G)&&((xe=x())==null||xe.unobserve(a(G)))});function Re(xe){C()&&(!A(ge)||!k()||A(te)>0)&&ie(y()),ne("nodeclick",{node:d().internals.userNode,event:xe})}ee(()=>E(S()),()=>{j(r,S()||"default")}),ee(()=>(n(),a(r)),()=>{j(i,!!n()[a(r)])}),ee(()=>(n(),a(r),Mn),()=>{j(u,n()[a(r)]||Mn)}),ee(()=>(a(i),E(S())),()=>{a(i)||console.warn("003",Kt.error003(S()))}),ee(()=>(E(_()),E(T()),E(M()),E(m()),E(L()),E(f())),()=>{j(g,vs({width:_(),height:T(),initialWidth:M(),initialHeight:m(),measuredWidth:L(),measuredHeight:f()}))}),ee(()=>E(N()),()=>{Ee.set(!!N())}),ee(()=>(a(Ne),a(r),a(ze),E(O()),a(Ce),E(Y()),E(y()),a(F)),()=>{(a(Ne)&&a(r)!==a(Ne)||a(ze)&&O()!==a(ze)||a(Ce)&&Y()!==a(Ce))&&requestAnimationFrame(()=>re(new Map([[y(),{id:y(),nodeElement:a(F),force:!0}]]))),j(Ne,a(r)),j(ze,O()),j(Ce,Y())}),ee(()=>(E(x()),a(F),a(G),E(R())),()=>{x()&&(a(F)!==a(G)||!R())&&(a(G)&&x().unobserve(a(G)),a(F)&&x().observe(a(F)),j(G,a(F)))}),We(),fe(!0);var Se=st(),ke=De(Se);{var Ae=xe=>{var Me=bs();let qe,Qe;var lt=ae(Me);Mo(lt,()=>a(u),(ve,Te)=>{Te(ve,{get data(){return h()},get id(){return y()},get selected(){return w()},get selectable(){return C()},get deletable(){return z()},get sourcePosition(){return O()},get targetPosition(){return Y()},get zIndex(){return I()},get dragging(){return v()},get draggable(){return k()},get dragHandle(){return H()},get parentId(){return X()},get type(){return a(r)},get isConnectable(){return o()},get positionAbsoluteX(){return D()},get positionAbsoluteY(){return B()},get width(){return _()},get height(){return T()}})}),se(Me),Ue(Me,(ve,Te)=>Pt==null?void 0:Pt(ve,Te),()=>({nodeId:y(),isSelectable:C(),disabled:!1,handleSelector:H(),noDragClass:"nodrag",nodeClickDistance:K(),onNodeMouseDown:ie,onDrag:(ve,Te,Ve,tt)=>{ne("nodedrag",{event:ve,targetNode:Ve,nodes:tt})},onDragStart:(ve,Te,Ve,tt)=>{ne("nodedragstart",{event:ve,targetNode:Ve,nodes:tt})},onDragStop:(ve,Te,Ve,tt)=>{ne("nodedragstop",{event:ve,targetNode:Ve,nodes:tt})},store:W})),Hn(Me,ve=>j(F,ve),()=>a(F)),mt(()=>_e("click",Me,Re)),mt(()=>_e("mouseenter",Me,ve=>ne("nodemouseenter",{node:d(),event:ve}))),mt(()=>_e("mouseleave",Me,ve=>ne("nodemouseleave",{node:d(),event:ve}))),mt(()=>_e("mousemove",Me,ve=>ne("nodemousemove",{node:d(),event:ve}))),mt(()=>_e("contextmenu",Me,ve=>ne("nodecontextmenu",{node:d(),event:ve}))),be(ve=>{le(Me,"data-id",y()),qe=Je(Me,1,ve,null,qe,{dragging:v(),selected:w(),draggable:k(),connectable:N(),selectable:C(),nopan:k(),parent:P()}),Qe=rt(Me,`${p()??""??""};${a(g),V(()=>a(g).width)??""}${a(g),V(()=>a(g).height)??""}`,Qe,{"z-index":I(),transform:`translate(${D()??""}px, ${B()??""}px)`,visibility:R()?"visible":"hidden"})},[()=>et((E(Pe),a(r),E(U()),V(()=>Pe(["svelte-flow__node",`svelte-flow__node-${a(r)}`,U()]))))]),J(xe,Me)};He(ke,xe=>{b()||xe(Ae)})}J(t,Se),ue(),l()}var xs=we('<div class="svelte-flow__nodes svelte-v0zrhd"></div>');function ps(t,e){de(e,!1);const n=()=>Z(d,"$visibleNodes",i),o=()=>Z(y,"$nodesDraggable",i),s=()=>Z(w,"$elementsSelectable",i),l=()=>Z(h,"$nodesConnectable",i),r=()=>Z(C,"$parentLookup",i),[i,u]=Xe();let g=c(e,"nodeClickDistance",8,0);const{visibleNodes:d,nodesDraggable:y,nodesConnectable:h,elementsSelectable:w,updateNodeInternals:k,parentLookup:C}=Oe(),N=typeof ResizeObserver>"u"?null:new ResizeObserver(b=>{const v=new Map;b.forEach(x=>{const p=x.target.getAttribute("data-id");v.set(p,{id:p,nodeElement:x.target,force:!0})}),k(v)});nn(()=>{N==null||N.disconnect()}),fe();var z=xs();Dn(z,5,n,b=>b.id,(b,v)=>{{let x=ce(()=>(a(v),V(()=>!!a(v).selected))),p=ce(()=>(a(v),V(()=>!!a(v).hidden))),S=ce(()=>(a(v),o(),V(()=>!!(a(v).draggable||o()&&typeof a(v).draggable>"u")))),P=ce(()=>(a(v),s(),V(()=>!!(a(v).selectable||s()&&typeof a(v).selectable>"u")))),D=ce(()=>(a(v),l(),V(()=>!!(a(v).connectable||l()&&typeof a(v).connectable>"u")))),B=ce(()=>(a(v),V(()=>a(v).deletable??!0))),O=ce(()=>(r(),a(v),V(()=>r().has(a(v).id)))),Y=ce(()=>(a(v),V(()=>a(v).type??"default"))),I=ce(()=>(a(v),V(()=>a(v).internals.z??0))),L=ce(()=>(E(co),a(v),V(()=>co(a(v)))));ws(b,{get node(){return a(v)},get id(){return a(v),V(()=>a(v).id)},get data(){return a(v),V(()=>a(v).data)},get selected(){return a(x)},get hidden(){return a(p)},get draggable(){return a(S)},get selectable(){return a(P)},get connectable(){return a(D)},get deletable(){return a(B)},get positionX(){return a(v),V(()=>a(v).internals.positionAbsolute.x)},get positionY(){return a(v),V(()=>a(v).internals.positionAbsolute.y)},get isParent(){return a(O)},get style(){return a(v),V(()=>a(v).style)},get class(){return a(v),V(()=>a(v).class)},get type(){return a(Y)},get sourcePosition(){return a(v),V(()=>a(v).sourcePosition)},get targetPosition(){return a(v),V(()=>a(v).targetPosition)},get dragging(){return a(v),V(()=>a(v).dragging)},get zIndex(){return a(I)},get dragHandle(){return a(v),V(()=>a(v).dragHandle)},get initialized(){return a(L)},get width(){return a(v),V(()=>a(v).width)},get height(){return a(v),V(()=>a(v).height)},get initialWidth(){return a(v),V(()=>a(v).initialWidth)},get initialHeight(){return a(v),V(()=>a(v).initialHeight)},get measuredWidth(){return a(v),V(()=>a(v).measured.width)},get measuredHeight(){return a(v),V(()=>a(v).measured.height)},get parentId(){return a(v),V(()=>a(v).parentId)},get resizeObserver(){return N},get nodeClickDistance(){return g()},$$events:{nodeclick(f){ye.call(this,e,f)},nodemouseenter(f){ye.call(this,e,f)},nodemousemove(f){ye.call(this,e,f)},nodemouseleave(f){ye.call(this,e,f)},nodedrag(f){ye.call(this,e,f)},nodedragstart(f){ye.call(this,e,f)},nodedragstop(f){ye.call(this,e,f)},nodecontextmenu(f){ye.call(this,e,f)}}})}}),se(z),J(t,z),ue(),u()}var _s=Ye('<svg><g role="img"><!></g></svg>');function ks(t,e){de(e,!1);const n=()=>Z(q,"$edgeTypes",r),o=()=>Z(te,"$flowId",r),s=()=>Z(ge,"$elementsSelectable",r),l=()=>Z(W,"$edgeLookup",r),[r,i]=Xe(),u=Q(void 0,!0),g=Q(void 0,!0),d=Q(void 0,!0),y=Q(void 0,!0),h=Q(void 0,!0);let w=c(e,"id",9),k=c(e,"type",9,"default"),C=c(e,"source",9,""),N=c(e,"target",9,""),z=c(e,"data",25,()=>({})),b=c(e,"style",9,void 0),v=c(e,"zIndex",9,void 0),x=c(e,"animated",9,!1),p=c(e,"selected",9,!1),S=c(e,"selectable",9,void 0),P=c(e,"deletable",9,void 0),D=c(e,"hidden",9,!1),B=c(e,"label",9,void 0),O=c(e,"labelStyle",9,void 0),Y=c(e,"markerStart",9,void 0),I=c(e,"markerEnd",9,void 0),L=c(e,"sourceHandle",9,void 0),f=c(e,"targetHandle",9,void 0),M=c(e,"sourceX",9),m=c(e,"sourceY",9),_=c(e,"targetX",9),T=c(e,"targetY",9),H=c(e,"sourcePosition",9),R=c(e,"targetPosition",9),X=c(e,"ariaLabel",9,void 0),K=c(e,"interactionWidth",9,void 0),U=c(e,"class",9,"");Vt("svelteflow__edge_id",w());const{edgeLookup:W,edgeTypes:q,flowId:te,elementsSelectable:ge}=Oe(),ie=bt(),re=ei();function F(ze){const Ce=l().get(w());Ce&&(re(w()),ie("edgeclick",{event:ze,edge:Ce}))}function G(ze,Ce){const Re=l().get(w());Re&&ie(Ce,{event:ze,edge:Re})}ee(()=>E(k()),()=>{j(u,k()||"default")}),ee(()=>(n(),a(u),Nn),()=>{j(g,n()[a(u)]||Nn)}),ee(()=>(E(Y()),o()),()=>{j(d,Y()?`url('#${Sn(Y(),o())}')`:void 0)}),ee(()=>(E(I()),o()),()=>{j(y,I()?`url('#${Sn(I(),o())}')`:void 0)}),ee(()=>(E(S()),s()),()=>{j(h,S()??s())}),We(),fe(!0);var ne=st(),Ee=De(ne);{var Ne=ze=>{var Ce=_s();let Re;var Se=ae(Ce);let ke;var Ae=ae(Se);{let xe=ce(()=>P()??!0);Mo(Ae,()=>a(g),(Me,qe)=>{qe(Me,{get id(){return w()},get source(){return C()},get target(){return N()},get sourceX(){return M()},get sourceY(){return m()},get targetX(){return _()},get targetY(){return T()},get sourcePosition(){return H()},get targetPosition(){return R()},get animated(){return x()},get selected(){return p()},get label(){return B()},get labelStyle(){return O()},get data(){return z()},get style(){return b()},get interactionWidth(){return K()},get selectable(){return a(h)},get deletable(){return a(xe)},get type(){return a(u)},get sourceHandleId(){return L()},get targetHandleId(){return f()},get markerStart(){return a(d)},get markerEnd(){return a(y)}})})}se(Se),se(Ce),be(xe=>{Re=rt(Ce,"",Re,{"z-index":v()}),ke=Je(Se,0,xe,null,ke,{animated:x(),selected:p(),selectable:a(h)}),le(Se,"data-id",w()),le(Se,"aria-label",X()===null?void 0:X()?X():`Edge from ${C()} to ${N()}`)},[()=>et((E(Pe),E(U()),V(()=>Pe(["svelte-flow__edge",U()]))))]),_e("click",Se,F),_e("contextmenu",Se,xe=>{G(xe,"edgecontextmenu")}),_e("mouseenter",Se,xe=>{G(xe,"edgemouseenter")}),_e("mouseleave",Se,xe=>{G(xe,"edgemouseleave")}),J(ze,Ce)};He(Ee,ze=>{D()||ze(Ne)})}J(t,ne),ue(),i()}function Es(t,e){de(e,!1);let n=c(e,"onMount",8,void 0),o=c(e,"onDestroy",8,void 0);Rt(()=>{var s;return(s=n())==null||s(),o()}),fe(),ue()}var Ps=Ye("<defs></defs>");function zs(t,e){de(e,!1);const n=()=>Z(l,"$markers",o),[o,s]=Xe(),{markers:l}=Oe();fe();var r=Ps();Dn(r,5,n,i=>i.id,(i,u)=>{Ns(i,At(()=>a(u)))}),se(r),J(t,r),ue(),s()}var Cs=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" fill="none" points="-5,-4 0,0 -5,4"></polyline>'),Ss=Ye('<polyline stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Ms=Ye('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function Ns(t,e){de(e,!1);let n=c(e,"id",8),o=c(e,"type",8),s=c(e,"width",8,12.5),l=c(e,"height",8,12.5),r=c(e,"markerUnits",8,"strokeWidth"),i=c(e,"orient",8,"auto-start-reverse"),u=c(e,"color",8,void 0),g=c(e,"strokeWidth",8,void 0);fe();var d=Ms(),y=ae(d);{var h=k=>{var C=Cs();be(()=>{le(C,"stroke",u()),le(C,"stroke-width",g())}),J(k,C)},w=k=>{var C=st(),N=De(C);{var z=b=>{var v=Ss();be(()=>{le(v,"stroke",u()),le(v,"stroke-width",g()),le(v,"fill",u())}),J(b,v)};He(N,b=>{E(o()),E(wt),V(()=>o()===wt.ArrowClosed)&&b(z)},!0)}J(k,C)};He(y,k=>{E(o()),E(wt),V(()=>o()===wt.Arrow)?k(h):k(w,!1)})}se(d),be(()=>{le(d,"id",n()),le(d,"markerWidth",`${s()}`),le(d,"markerHeight",`${l()}`),le(d,"markerUnits",r()),le(d,"orient",i())}),J(t,d),ue()}var Ts=we('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!> <!></div>');function Is(t,e){de(e,!1);const n=()=>Z(i,"$visibleEdges",s),o=()=>Z(d,"$elementsSelectable",s),[s,l]=Xe();let r=c(e,"defaultEdgeOptions",8);const{visibleEdges:i,edgesInitialized:u,edges:{setDefaultOptions:g},elementsSelectable:d}=Oe();Rt(()=>{r()&&g(r())}),fe();var y=Ts(),h=ae(y),w=ae(h);zs(w,{}),se(h);var k=me(h,2);Dn(k,1,n,z=>z.id,(z,b)=>{{let v=ce(()=>(a(b),o(),V(()=>a(b).selectable??o()))),x=ce(()=>(a(b),V(()=>a(b).type||"default")));ks(z,{get id(){return a(b),V(()=>a(b).id)},get source(){return a(b),V(()=>a(b).source)},get target(){return a(b),V(()=>a(b).target)},get data(){return a(b),V(()=>a(b).data)},get style(){return a(b),V(()=>a(b).style)},get animated(){return a(b),V(()=>a(b).animated)},get selected(){return a(b),V(()=>a(b).selected)},get selectable(){return a(v)},get deletable(){return a(b),V(()=>a(b).deletable)},get hidden(){return a(b),V(()=>a(b).hidden)},get label(){return a(b),V(()=>a(b).label)},get labelStyle(){return a(b),V(()=>a(b).labelStyle)},get markerStart(){return a(b),V(()=>a(b).markerStart)},get markerEnd(){return a(b),V(()=>a(b).markerEnd)},get sourceHandle(){return a(b),V(()=>a(b).sourceHandle)},get targetHandle(){return a(b),V(()=>a(b).targetHandle)},get sourceX(){return a(b),V(()=>a(b).sourceX)},get sourceY(){return a(b),V(()=>a(b).sourceY)},get targetX(){return a(b),V(()=>a(b).targetX)},get targetY(){return a(b),V(()=>a(b).targetY)},get sourcePosition(){return a(b),V(()=>a(b).sourcePosition)},get targetPosition(){return a(b),V(()=>a(b).targetPosition)},get ariaLabel(){return a(b),V(()=>a(b).ariaLabel)},get interactionWidth(){return a(b),V(()=>a(b).interactionWidth)},get class(){return a(b),V(()=>a(b).class)},get type(){return a(x)},get zIndex(){return a(b),V(()=>a(b).zIndex)},$$events:{edgeclick(p){ye.call(this,e,p)},edgecontextmenu(p){ye.call(this,e,p)},edgemouseenter(p){ye.call(this,e,p)},edgemouseleave(p){ye.call(this,e,p)}}})}});var C=me(k,2);{var N=z=>{Es(z,{onMount:()=>{qt(u,!0)},onDestroy:()=>{qt(u,!1)}})};He(C,z=>{n(),V(()=>n().length>0)&&z(N)})}se(y),J(t,y),ue(),l()}var Os=we('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function ii(t,e){let n=c(e,"x",8,0),o=c(e,"y",8,0),s=c(e,"width",8,0),l=c(e,"height",8,0),r=c(e,"isVisible",8,!0);var i=st(),u=De(i);{var g=d=>{var y=Os();let h;be(()=>h=rt(y,"",h,{width:typeof s()=="string"?s():`${s()}px`,height:typeof l()=="string"?l():`${l()}px`,transform:`translate(${n()}px, ${o()}px)`})),J(d,y)};He(u,d=>{r()&&d(g)})}J(t,i)}function Hs(t,e){de(e,!1);const n=()=>Z(r,"$selectionRect",s),o=()=>Z(i,"$selectionRectMode",s),[s,l]=Xe(),{selectionRect:r,selectionRectMode:i}=Oe();fe();{let u=ce(()=>!!(n()&&o()==="user")),g=ce(()=>{var w;return(w=n())==null?void 0:w.width}),d=ce(()=>{var w;return(w=n())==null?void 0:w.height}),y=ce(()=>{var w;return(w=n())==null?void 0:w.x}),h=ce(()=>{var w;return(w=n())==null?void 0:w.y});ii(t,{get isVisible(){return a(u)},get width(){return a(g)},get height(){return a(d)},get x(){return a(y)},get y(){return a(h)}})}ue(),l()}var Ds=we('<div class="selection-wrapper nopan svelte-sf2y5e" role="button" tabindex="-1"><!></div>');function As(t,e){de(e,!1);const n=()=>Z(u,"$selectionRectMode",l),o=()=>Z(d,"$nodeLookup",l),s=()=>Z(g,"$nodes",l),[l,r]=Xe(),i=Oe(),{selectionRectMode:u,nodes:g,nodeLookup:d}=i,y=bt();let h=Q(null);function w(b){const v=s().filter(x=>x.selected);y("selectioncontextmenu",{nodes:v,event:b})}function k(b){const v=s().filter(x=>x.selected);y("selectionclick",{nodes:v,event:b})}ee(()=>(n(),o(),s()),()=>{n()==="nodes"&&(j(h,rn(o(),{filter:b=>!!b.selected})),s())}),We(),fe();var C=st(),N=De(C);{var z=b=>{var v=Ds(),x=ae(v);ii(x,{width:"100%",height:"100%",x:0,y:0}),se(v),Ue(v,(p,S)=>Pt==null?void 0:Pt(p,S),()=>({disabled:!1,store:i,onDrag:(p,S,P,D)=>{y("nodedrag",{event:p,targetNode:null,nodes:D})},onDragStart:(p,S,P,D)=>{y("nodedragstart",{event:p,targetNode:null,nodes:D})},onDragStop:(p,S,P,D)=>{y("nodedragstop",{event:p,targetNode:null,nodes:D})}})),mt(()=>_e("contextmenu",v,w)),mt(()=>_e("click",v,k)),mt(()=>_e("keyup",v,()=>{})),be(()=>rt(v,`width: ${a(h),V(()=>a(h).width)??""}px; height: ${a(h),V(()=>a(h).height)??""}px; transform: translate(${a(h),V(()=>a(h).x)??""}px, ${a(h),V(()=>a(h).y)??""}px)`)),J(b,v)};He(N,b=>{n(),a(h),E(dt),V(()=>n()==="nodes"&&a(h)&&dt(a(h).x)&&dt(a(h).y))&&b(z)})}J(t,C),ue(),r()}function pe(t,e){let{enabled:n=!0,trigger:o,type:s="keydown"}=e;function l(r){const i=Array.isArray(o)?o:[o],u={alt:r.altKey,ctrl:r.ctrlKey,shift:r.shiftKey,meta:r.metaKey};for(const g of i){const d={modifier:[],preventDefault:!1,enabled:!0,...g},{modifier:y,key:h,callback:w,preventDefault:k,enabled:C}=d;if(C){if(y.length&&!(Array.isArray(y)?y:[y]).map(b=>typeof b=="string"?[b]:b).some(b=>b.every(v=>u[v])))continue;if(r.key===h){k&&r.preventDefault();const N={node:t,trigger:d,originalEvent:r};t.dispatchEvent(new CustomEvent("shortcut",{detail:N})),w==null||w(N)}}}}return n&&t.addEventListener(s,l),{update:r=>{const{enabled:i=!0,type:u="keydown"}=r;n&&(!i||s!==u)?t.removeEventListener(s,l):!n&&i&&t.addEventListener(u,l),n=i,s=u,o=r.trigger},destroy:()=>{t.removeEventListener(s,l)}}}function Vs(t,e){de(e,!1);let n=c(e,"selectionKey",8,"Shift"),o=c(e,"multiSelectionKey",24,()=>en()?"Meta":"Control"),s=c(e,"deleteKey",8,"Backspace"),l=c(e,"panActivationKey",8," "),r=c(e,"zoomActivationKey",24,()=>en()?"Meta":"Control");const{selectionKeyPressed:i,multiselectionKeyPressed:u,deleteKeyPressed:g,panActivationKeyPressed:d,zoomActivationKeyPressed:y,selectionRect:h}=Oe();function w(b){return b!==null&&typeof b=="object"}function k(b){return w(b)?b.modifier||[]:[]}function C(b){return b==null?"":w(b)?b.key:b}function N(b,v){return(Array.isArray(b)?b:[b]).map(p=>{const S=C(p);return{key:S,modifier:k(p),enabled:S!==null,callback:v}})}function z(){h.set(null),i.set(!1),u.set(!1),g.set(!1),d.set(!1),y.set(!1)}fe(),_e("blur",$e,z),_e("contextmenu",$e,z),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(n(),()=>i.set(!0)),type:"keydown"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(n(),()=>i.set(!1)),type:"keyup"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(o(),()=>u.set(!0)),type:"keydown"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(o(),()=>u.set(!1)),type:"keyup"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(s(),b=>{!(b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)&&!sr(b.originalEvent)&&g.set(!0)}),type:"keydown"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(s(),()=>g.set(!1)),type:"keyup"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(l(),()=>d.set(!0)),type:"keydown"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(l(),()=>d.set(!1)),type:"keyup"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(r(),()=>y.set(!0)),type:"keydown"})),Ue($e,(b,v)=>pe==null?void 0:pe(b,v),()=>({trigger:N(r(),()=>y.set(!1)),type:"keyup"})),ue()}var Ls=Ye('<path fill="none" class="svelte-flow__connection-path"></path>'),Bs=Ye('<svg class="svelte-flow__connectionline"><g><!><!></g></svg>');function Ys(t,e){de(e,!1);const n=()=>Z(w,"$connection",r),o=()=>Z(k,"$connectionLineType",r),s=()=>Z(y,"$width",r),l=()=>Z(h,"$height",r),[r,i]=Xe();let u=c(e,"containerStyle",8,""),g=c(e,"style",8,""),d=c(e,"isCustomComponent",8,!1);const{width:y,height:h,connection:w,connectionLineType:k}=Oe();let C=Q(null);ee(()=>(n(),E(d()),o(),a(C),Cn),()=>{if(n().inProgress&&!d()){const{from:v,to:x,fromPosition:p,toPosition:S}=n(),P={sourceX:v.x,sourceY:v.y,sourcePosition:p,targetX:x.x,targetY:x.y,targetPosition:S};switch(o()){case Et.Bezier:(D=>{var B=yt(D,1);j(C,B[0])})(Bo(P));break;case Et.Step:(D=>{var B=yt(D,1);j(C,B[0])})(tn({...P,borderRadius:0}));break;case Et.SmoothStep:(D=>{var B=yt(D,1);j(C,B[0])})(tn(P));break;default:(D=>{var B=yt(D,1);j(C,B[0])})(Cn(P))}}}),We(),fe();var N=st(),z=De(N);{var b=v=>{var x=Bs(),p=ae(x),S=ae(p);Fe(S,e,"connectionLine",{},null);var P=me(S);{var D=B=>{var O=Ls();be(()=>{le(O,"d",a(C)),rt(O,g())}),J(B,O)};He(P,B=>{d()||B(D)})}se(p),se(x),be(B=>{le(x,"width",s()),le(x,"height",l()),rt(x,u()),Je(p,0,B)},[()=>et((E(Pe),E(io),n(),V(()=>Pe(["svelte-flow__connection",io(n().isValid)]))))]),J(v,x)};He(z,v=>{n(),V(()=>n().inProgress)&&v(b)})}J(t,N),ue(),i()}var Xs=we("<div><!></div>");function ri(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]),o=Ie(n,["position","style","class"]);de(e,!1);const s=()=>Z(y,"$selectionRectMode",l),[l,r]=Xe(),i=Q();let u=c(e,"position",8,"top-right"),g=c(e,"style",8,void 0),d=c(e,"class",8,void 0);const{selectionRectMode:y}=Oe();ee(()=>E(u()),()=>{j(i,`${u()}`.split("-"))}),We(),fe();var h=Xs();In(h,k=>({class:k,style:g(),...o,[Co]:{"pointer-events":s()?"none":""}}),[()=>(E(Pe),E(d()),a(i),V(()=>Pe(["svelte-flow__panel",d(),...a(i)])))]);var w=ae(h);Fe(w,e,"default",{},null),se(h),J(t,h),ue(),r()}var Rs=we('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Ks(t,e){de(e,!1);let n=c(e,"proOptions",8,void 0),o=c(e,"position",8,"bottom-right");fe();var s=st(),l=De(s);{var r=i=>{ri(i,{get position(){return o()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(u,g)=>{var d=Rs();J(u,d)},$$slots:{default:!0}})};He(l,i=>{E(n()),V(()=>{var u;return!((u=n())!=null&&u.hideAttribution)})&&i(r)})}J(t,s),ue()}function ko(t,{nodeTypes:e,edgeTypes:n,minZoom:o,maxZoom:s,translateExtent:l,paneClickDistance:r}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),o!==void 0&&t.setMinZoom(o),s!==void 0&&t.setMaxZoom(s),l!==void 0&&t.setTranslateExtent(l),r!==void 0&&t.setPaneClickDistance(r)}const Ws=t=>Object.keys(t);function Eo(t,e){Ws(e).forEach(n=>{const o=e[n];o!==void 0&&t[n].set(o)})}function Zs(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Fs(t="light"){return nt("light",n=>{if(t!=="system"){n(t);return}const o=Zs(),s=()=>n(o!=null&&o.matches?"dark":"light");return n(o!=null&&o.matches?"dark":"light"),o==null||o.addEventListener("change",s),()=>{o==null||o.removeEventListener("change",s)}})}var Gs=we('<!> <!> <div class="svelte-flow__edgelabel-renderer"></div> <div class="svelte-flow__viewport-portal"></div> <!> <!>',1),js=we("<!> <!>",1),Us=we("<div><!> <!> <!> <!></div>");function qs(t,e){const n=Ii(e),o=Ie(e,["children","$$slots","$$events","$$legacy"]),s=Ie(o,["id","nodes","edges","fitView","fitViewOptions","minZoom","maxZoom","initialViewport","viewport","nodeTypes","edgeTypes","selectionKey","selectionMode","panActivationKey","multiSelectionKey","zoomActivationKey","nodesDraggable","nodesConnectable","nodeDragThreshold","elementsSelectable","snapGrid","deleteKey","connectionRadius","connectionLineType","connectionMode","connectionLineStyle","connectionLineContainerStyle","onMoveStart","onMove","onMoveEnd","isValidConnection","translateExtent","nodeExtent","onlyRenderVisibleElements","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnDrag","selectionOnDrag","autoPanOnConnect","autoPanOnNodeDrag","onerror","ondelete","onedgecreate","attributionPosition","proOptions","defaultEdgeOptions","width","height","colorMode","onconnect","onconnectstart","onconnectend","onbeforedelete","oninit","nodeOrigin","paneClickDistance","nodeClickDistance","defaultMarkerColor","style","class"]);de(e,!1);const l=()=>Z(v(),"$viewport",u),r=()=>Z(ai,"$initialized",u),i=()=>Z(a(d),"$colorModeClass",u),[u,g]=Xe(),d=Q();let y=c(e,"id",8,"1"),h=c(e,"nodes",8),w=c(e,"edges",8),k=c(e,"fitView",8,void 0),C=c(e,"fitViewOptions",8,void 0),N=c(e,"minZoom",8,void 0),z=c(e,"maxZoom",8,void 0),b=c(e,"initialViewport",8,void 0),v=c(e,"viewport",8,void 0),x=c(e,"nodeTypes",8,void 0),p=c(e,"edgeTypes",8,void 0),S=c(e,"selectionKey",8,void 0),P=c(e,"selectionMode",8,void 0),D=c(e,"panActivationKey",8,void 0),B=c(e,"multiSelectionKey",8,void 0),O=c(e,"zoomActivationKey",8,void 0),Y=c(e,"nodesDraggable",8,void 0),I=c(e,"nodesConnectable",8,void 0),L=c(e,"nodeDragThreshold",8,void 0),f=c(e,"elementsSelectable",8,void 0),M=c(e,"snapGrid",8,void 0),m=c(e,"deleteKey",8,void 0),_=c(e,"connectionRadius",8,void 0),T=c(e,"connectionLineType",8,void 0),H=c(e,"connectionMode",24,()=>vt.Strict),R=c(e,"connectionLineStyle",8,""),X=c(e,"connectionLineContainerStyle",8,""),K=c(e,"onMoveStart",8,void 0),U=c(e,"onMove",8,void 0),W=c(e,"onMoveEnd",8,void 0),q=c(e,"isValidConnection",8,void 0),te=c(e,"translateExtent",8,void 0),ge=c(e,"nodeExtent",8,void 0),ie=c(e,"onlyRenderVisibleElements",8,void 0),re=c(e,"panOnScrollMode",24,()=>gt.Free),F=c(e,"preventScrolling",8,!0),G=c(e,"zoomOnScroll",8,!0),ne=c(e,"zoomOnDoubleClick",8,!0),Ee=c(e,"zoomOnPinch",8,!0),Ne=c(e,"panOnScroll",8,!1),ze=c(e,"panOnDrag",8,!0),Ce=c(e,"selectionOnDrag",8,void 0),Re=c(e,"autoPanOnConnect",8,!0),Se=c(e,"autoPanOnNodeDrag",8,!0),ke=c(e,"onerror",8,void 0),Ae=c(e,"ondelete",8,void 0),xe=c(e,"onedgecreate",8,void 0),Me=c(e,"attributionPosition",8,void 0),qe=c(e,"proOptions",8,void 0),Qe=c(e,"defaultEdgeOptions",8,void 0),lt=c(e,"width",8,void 0),ve=c(e,"height",8,void 0),Te=c(e,"colorMode",8,"light"),Ve=c(e,"onconnect",8,void 0),tt=c(e,"onconnectstart",8,void 0),Zt=c(e,"onconnectend",8,void 0),Le=c(e,"onbeforedelete",8,void 0),Ge=c(e,"oninit",8,void 0),Be=c(e,"nodeOrigin",8,void 0),je=c(e,"paneClickDistance",8,0),at=c(e,"nodeClickDistance",8,0),Bn=c(e,"defaultMarkerColor",8,"#b1b1b7"),si=c(e,"style",8,void 0),Yn=c(e,"class",8,void 0),un=Q(),It=Q(),Ot=Q();const li=l()||b(),Ze=Ei(dn)?Oe():ds({nodes:A(h()),edges:A(w()),width:lt(),height:ve(),fitView:k(),nodeOrigin:Be(),nodeExtent:ge()});Rt(()=>(Ze.width.set(a(It)),Ze.height.set(a(Ot)),Ze.domNode.set(a(un)),Ze.syncNodeStores(h()),Ze.syncEdgeStores(w()),Ze.syncViewport(v()),k()!==void 0&&Ze.fitViewOnInit.set(k()),C()&&Ze.fitViewOptions.set(C()),ko(Ze,{nodeTypes:x(),edgeTypes:p(),minZoom:N(),maxZoom:z(),translateExtent:te(),paneClickDistance:je()}),()=>{Ze.reset()}));const{initialized:ai}=Ze;let fn=Q(!1);ee(()=>(a(It),a(Ot)),()=>{a(It)!==void 0&&a(Ot)!==void 0&&(Ze.width.set(a(It)),Ze.height.set(a(Ot)))}),ee(()=>(a(fn),r(),E(Ge())),()=>{var Ke;!a(fn)&&r()&&((Ke=Ge())==null||Ke(),j(fn,!0))}),ee(()=>(E(y()),E(T()),E(_()),E(P()),E(M()),E(Bn()),E(Y()),E(I()),E(f()),E(ie()),E(q()),E(Re()),E(Se()),E(ke()),E(Ae()),E(xe()),E(H()),E(L()),E(Ve()),E(tt()),E(Zt()),E(Le()),E(Be()),Eo),()=>{const Ke={flowId:y(),connectionLineType:T(),connectionRadius:_(),selectionMode:P(),snapGrid:M(),defaultMarkerColor:Bn(),nodesDraggable:Y(),nodesConnectable:I(),elementsSelectable:f(),onlyRenderVisibleElements:ie(),isValidConnection:q(),autoPanOnConnect:Re(),autoPanOnNodeDrag:Se(),onerror:ke(),ondelete:Ae(),onedgecreate:xe(),connectionMode:H(),nodeDragThreshold:L(),onconnect:Ve(),onconnectstart:tt(),onconnectend:Zt(),onbeforedelete:Le(),nodeOrigin:Be()};Eo(Ze,Ke)}),ee(()=>(E(x()),E(p()),E(N()),E(z()),E(te()),E(je())),()=>{ko(Ze,{nodeTypes:x(),edgeTypes:p(),minZoom:N(),maxZoom:z(),translateExtent:te(),paneClickDistance:je()})}),ee(()=>E(Te()),()=>{zi(j(d,Fs(Te())),"$colorModeClass",u)}),We(),fe();var ft=Us();In(ft,Ke=>({style:si(),class:Ke,"data-testid":"svelte-flow__wrapper",...s,role:"application"}),[()=>(E(Pe),E(Yn()),i(),V(()=>Pe(["svelte-flow",Yn(),i()])))],void 0,"svelte-4xqsnx");var Xn=ae(ft);Vs(Xn,{get selectionKey(){return S()},get deleteKey(){return m()},get panActivationKey(){return D()},get multiSelectionKey(){return B()},get zoomActivationKey(){return O()}});var Rn=me(Xn,2);{let Ke=ce(()=>(E(re()),E(gt),V(()=>re()===void 0?gt.Free:re()))),di=ce(()=>F()===void 0?!0:F()),ui=ce(()=>G()===void 0?!0:G()),fi=ce(()=>ne()===void 0?!0:ne()),gi=ce(()=>Ee()===void 0?!0:Ee()),hi=ce(()=>Ne()===void 0?!1:Ne()),mi=ce(()=>ze()===void 0?!0:ze()),yi=ce(()=>je()===void 0?0:je());fs(Rn,{get initialViewport(){return li},get onMoveStart(){return K()},get onMove(){return U()},get onMoveEnd(){return W()},get panOnScrollMode(){return a(Ke)},get preventScrolling(){return a(di)},get zoomOnScroll(){return a(ui)},get zoomOnDoubleClick(){return a(fi)},get zoomOnPinch(){return a(gi)},get panOnScroll(){return a(hi)},get panOnDrag(){return a(mi)},get paneClickDistance(){return a(yi)},children:(vi,Yl)=>{{let bi=ce(()=>ze()===void 0?!0:ze());hs(vi,{get panOnDrag(){return a(bi)},get selectionOnDrag(){return Ce()},$$events:{paneclick(Ht){ye.call(this,e,Ht)},panecontextmenu(Ht){ye.call(this,e,Ht)}},children:(Ht,Xl)=>{var Wn=js(),Zn=De(Wn);ys(Zn,{children:(xi,Rl)=>{var Fn=Gs(),Gn=De(Fn);Is(Gn,{get defaultEdgeOptions(){return Qe()},$$events:{edgeclick(he){ye.call(this,e,he)},edgecontextmenu(he){ye.call(this,e,he)},edgemouseenter(he){ye.call(this,e,he)},edgemouseleave(he){ye.call(this,e,he)}}});var jn=me(Gn,2);Ys(jn,{get containerStyle(){return X()},get style(){return R()},isCustomComponent:V(()=>n.connectionLine),$$slots:{connectionLine:(he,Kl)=>{var qn=st(),_i=De(qn);Fe(_i,e,"connectionLine",{},null),J(he,qn)}}});var Un=me(jn,6);ps(Un,{get nodeClickDistance(){return at()},$$events:{nodeclick(he){ye.call(this,e,he)},nodemouseenter(he){ye.call(this,e,he)},nodemousemove(he){ye.call(this,e,he)},nodemouseleave(he){ye.call(this,e,he)},nodedragstart(he){ye.call(this,e,he)},nodedrag(he){ye.call(this,e,he)},nodedragstop(he){ye.call(this,e,he)},nodecontextmenu(he){ye.call(this,e,he)}}});var pi=me(Un,2);As(pi,{$$events:{selectionclick(he){ye.call(this,e,he)},selectioncontextmenu(he){ye.call(this,e,he)},nodedragstart(he){ye.call(this,e,he)},nodedrag(he){ye.call(this,e,he)},nodedragstop(he){ye.call(this,e,he)}}}),J(xi,Fn)},$$slots:{default:!0}});var wi=me(Zn,2);Hs(wi,{}),J(Ht,Wn)},$$slots:{default:!0}})}},$$slots:{default:!0}})}var Kn=me(Rn,2);Ks(Kn,{get proOptions(){return qe()},get position(){return Me()}});var ci=me(Kn,2);Fe(ci,e,"default",{},null),se(ft),Hn(ft,Ke=>j(un,Ke),()=>a(un)),eo(ft,"clientWidth",Ke=>j(It,Ke)),eo(ft,"clientHeight",Ke=>j(Ot,Ke)),_e("dragover",ft,function(Ke){ye.call(this,e,Ke)}),_e("drop",ft,function(Ke){ye.call(this,e,Ke)}),J(t,ft),ue(),g()}function Js(t,e){de(e,!1);let n=c(e,"initialNodes",8,void 0),o=c(e,"initialEdges",8,void 0),s=c(e,"initialWidth",8,void 0),l=c(e,"initialHeight",8,void 0),r=c(e,"fitView",8,void 0),i=c(e,"nodeOrigin",8,void 0);const u=oi({nodes:n(),edges:o(),width:s(),height:l(),nodeOrigin:i(),fitView:r()});Vt(dn,{getStore:()=>u}),nn(()=>{u.reset()}),fe();var g=st(),d=De(g);Fe(d,e,"default",{},null),J(t,g),ue()}var Qs=we("<button><!></button>");function pt(t,e){const n=Ie(e,["children","$$slots","$$events","$$legacy"]),o=Ie(n,["class"]);de(e,!1);let s=c(e,"class",8,void 0),l,r,i,u,g;fe();var d=Qs();In(d,h=>({type:"button",class:h,...o,[Co]:{"--xy-controls-button-background-color-props":l,"--xy-controls-button-background-color-hover-props":r,"--xy-controls-button-color-props":i,"--xy-controls-button-color-hover-props":u,"--xy-controls-button-border-color-props":g}}),[()=>(E(Pe),E(s()),V(()=>Pe(["svelte-flow__controls-button",s()])))]);var y=ae(d);Fe(y,e,"default",{class:"button-svg"},null),se(d),_e("click",d,function(h){ye.call(this,e,h)}),J(t,d),ue()}var $s=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function el(t){var e=$s();J(t,e)}var tl=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function nl(t){var e=tl();J(t,e)}var ol=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function il(t){var e=ol();J(t,e)}var rl=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function sl(t){var e=rl();J(t,e)}var ll=Ye('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function al(t){var e=ll();J(t,e)}var cl=we("<!> <!>",1),dl=we("<!> <!> <!> <!> <!> <!>",1);function ul(t,e){de(e,!1);const n=()=>Z(T,"$nodesDraggable",u),o=()=>Z(H,"$nodesConnectable",u),s=()=>Z(R,"$elementsSelectable",u),l=()=>Z(M,"$viewport",u),r=()=>Z(m,"$minZoom",u),i=()=>Z(_,"$maxZoom",u),[u,g]=Xe(),d=Q(),y=Q(),h=Q(),w=Q();let k=c(e,"position",8,"bottom-left"),C=c(e,"showZoom",8,!0),N=c(e,"showFitView",8,!0),z=c(e,"showLock",8,!0),b=c(e,"buttonBgColor",8,void 0),v=c(e,"buttonBgColorHover",8,void 0),x=c(e,"buttonColor",8,void 0),p=c(e,"buttonColorHover",8,void 0),S=c(e,"buttonBorderColor",8,void 0),P=c(e,"ariaLabel",8,void 0),D=c(e,"style",8,void 0),B=c(e,"orientation",8,"vertical"),O=c(e,"fitViewOptions",8,void 0),Y=c(e,"class",8,"");const{zoomIn:I,zoomOut:L,fitView:f,viewport:M,minZoom:m,maxZoom:_,nodesDraggable:T,nodesConnectable:H,elementsSelectable:R}=Oe(),X={bgColor:b(),bgColorHover:v(),color:x(),colorHover:p(),borderColor:S()},K=()=>{I()},U=()=>{L()},W=()=>{f(O())},q=()=>{j(d,!a(d)),T.set(a(d)),H.set(a(d)),R.set(a(d))};ee(()=>(n(),o(),s()),()=>{j(d,n()||o()||s())}),ee(()=>(l(),r()),()=>{j(y,l().zoom<=r())}),ee(()=>(l(),i()),()=>{j(h,l().zoom>=i())}),ee(()=>E(B()),()=>{j(w,B()==="horizontal"?"horizontal":"vertical")}),We(),fe();{let te=ce(()=>(E(Pe),a(w),E(Y()),V(()=>Pe(["svelte-flow__controls",a(w),Y()])))),ge=ce(()=>P()??"Svelte Flow controls");ri(t,{get class(){return a(te)},get position(){return k()},"data-testid":"svelte-flow__controls",get"aria-label"(){return a(ge)},get style(){return D()},children:(ie,re)=>{var F=dl(),G=De(F);Fe(G,e,"before",{},null);var ne=me(G,2);{var Ee=Ae=>{var xe=cl(),Me=De(xe);pt(Me,At({class:"svelte-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",get disabled(){return a(h)}},()=>X,{$$events:{click:K},children:(Qe,lt)=>{el(Qe)},$$slots:{default:!0}}));var qe=me(Me,2);pt(qe,At({class:"svelte-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",get disabled(){return a(y)}},()=>X,{$$events:{click:U},children:(Qe,lt)=>{nl(Qe)},$$slots:{default:!0}})),J(Ae,xe)};He(ne,Ae=>{C()&&Ae(Ee)})}var Ne=me(ne,2);{var ze=Ae=>{pt(Ae,At({class:"svelte-flow__controls-fitview",title:"fit view","aria-label":"fit view"},()=>X,{$$events:{click:W},children:(xe,Me)=>{il(xe)},$$slots:{default:!0}}))};He(Ne,Ae=>{N()&&Ae(ze)})}var Ce=me(Ne,2);{var Re=Ae=>{pt(Ae,At({class:"svelte-flow__controls-interactive",title:"toggle interactivity","aria-label":"toggle interactivity"},()=>X,{$$events:{click:q},children:(xe,Me)=>{var qe=st(),Qe=De(qe);{var lt=Te=>{al(Te)},ve=Te=>{sl(Te)};He(Qe,Te=>{a(d)?Te(lt):Te(ve,!1)})}J(xe,qe)},$$slots:{default:!0}}))};He(Ce,Ae=>{z()&&Ae(Re)})}var Se=me(Ce,2);Fe(Se,e,"default",{},null);var ke=me(Se,2);Fe(ke,e,"after",{},null),J(ie,F)},$$slots:{default:!0}})}ue(),g()}var ut;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ut||(ut={}));var fl=Ye("<circle></circle>");function gl(t,e){de(e,!1);let n=c(e,"radius",8,5),o=c(e,"class",8,"");fe();var s=fl();be(l=>{le(s,"cx",n()),le(s,"cy",n()),le(s,"r",n()),Je(s,0,l)},[()=>et((E(Pe),E(o()),V(()=>Pe(["svelte-flow__background-pattern","dots",o()]))))]),J(t,s),ue()}var hl=Ye("<path></path>");function ml(t,e){de(e,!1);let n=c(e,"lineWidth",8,1),o=c(e,"dimensions",8),s=c(e,"variant",8,void 0),l=c(e,"class",8,"");fe();var r=hl();be(i=>{le(r,"stroke-width",n()),le(r,"d",(E(o()),V(()=>`M${o()[0]/2} 0 V${o()[1]} M0 ${o()[1]/2} H${o()[0]}`))),Je(r,0,i)},[()=>et((E(Pe),E(s()),E(l()),V(()=>Pe(["svelte-flow__background-pattern",s(),l()]))))]),J(t,r),ue()}const yl={[ut.Dots]:1,[ut.Lines]:1,[ut.Cross]:6};var vl=Ye('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function bl(t,e){de(e,!1);const n=()=>Z(p,"$flowId",s),o=()=>Z(x,"$viewport",s),[s,l]=Xe(),r=Q(),i=Q(),u=Q(),g=Q(),d=Q();let y=c(e,"id",8,void 0),h=c(e,"variant",24,()=>ut.Dots),w=c(e,"gap",8,20),k=c(e,"size",8,1),C=c(e,"lineWidth",8,1),N=c(e,"bgColor",8,void 0),z=c(e,"patternColor",8,void 0),b=c(e,"patternClass",8,void 0),v=c(e,"class",8,"");const{viewport:x,flowId:p}=Oe(),S=k()||yl[h()],P=h()===ut.Dots,D=h()===ut.Cross,B=Array.isArray(w())?w():[w(),w()];ee(()=>(n(),E(y())),()=>{j(r,`background-pattern-${n()}-${y()?y():""}`)}),ee(()=>o(),()=>{j(i,[B[0]*o().zoom||1,B[1]*o().zoom||1])}),ee(()=>o(),()=>{j(u,S*o().zoom)}),ee(()=>(a(u),a(i)),()=>{j(g,D?[a(u),a(u)]:a(i))}),ee(()=>(a(u),a(g)),()=>{j(d,P?[a(u)/2,a(u)/2]:[a(g)[0]/2,a(g)[1]/2])}),We(),fe();var O=vl();let Y;var I=ae(O),L=ae(I);{var f=_=>{{let T=ce(()=>a(u)/2);gl(_,{get radius(){return a(T)},get class(){return b()}})}},M=_=>{ml(_,{get dimensions(){return a(g)},get variant(){return h()},get lineWidth(){return C()},get class(){return b()}})};He(L,_=>{P?_(f):_(M,!1)})}se(I);var m=me(I);se(O),be(_=>{Je(O,0,_,"svelte-11j66u4"),Y=rt(O,"",Y,{"--xy-background-color-props":N(),"--xy-background-pattern-color-props":z()}),le(I,"id",a(r)),le(I,"x",(o(),a(i),V(()=>o().x%a(i)[0]))),le(I,"y",(o(),a(i),V(()=>o().y%a(i)[1]))),le(I,"width",(a(i),V(()=>a(i)[0]))),le(I,"height",(a(i),V(()=>a(i)[1]))),le(I,"patternTransform",(a(d),V(()=>`translate(-${a(d)[0]},-${a(d)[1]})`))),le(m,"fill",`url(#${a(r)})`)},[()=>et((E(Pe),E(v()),V(()=>Pe(["svelte-flow__background",v()]))))]),J(t,O),ue(),l()}const Po=t=>Qi(t);function wl(){const{zoomIn:t,zoomOut:e,fitView:n,onbeforedelete:o,snapGrid:s,viewport:l,width:r,height:i,minZoom:u,maxZoom:g,panZoom:d,nodes:y,edges:h,domNode:w,nodeLookup:k,nodeOrigin:C,edgeLookup:N,connectionLookup:z}=Oe(),b=p=>{var O,Y;const S=A(k),P=Po(p)?p:S.get(p.id),D=P.parentId?or(P.position,P.measured,P.parentId,S,A(C)):P.position,B={id:P.id,position:D,width:((O=P.measured)==null?void 0:O.width)??P.width,height:((Y=P.measured)==null?void 0:Y.height)??P.height,data:P.data};return Mt(B)},v=(p,S,P={replace:!1})=>{var O;const D=(O=A(k).get(p))==null?void 0:O.internals.userNode;if(!D)return;const B=typeof S=="function"?S(D):S;P.replace?y.update(Y=>Y.map(I=>I.id===p?Po(B)?B:{...I,...B}:I)):(Object.assign(D,B),y.update(Y=>Y))},x=p=>A(k).get(p);return{zoomIn:t,zoomOut:e,getInternalNode:x,getNode:p=>{var S;return(S=x(p))==null?void 0:S.internals.userNode},getNodes:p=>p===void 0?A(y):zo(A(k),p),getEdge:p=>A(N).get(p),getEdges:p=>p===void 0?A(h):zo(A(N),p),setZoom:(p,S)=>{const P=A(d);return P?P.scaleTo(p,{duration:S==null?void 0:S.duration}):Promise.resolve(!1)},getZoom:()=>A(l).zoom,setViewport:async(p,S)=>{const P=A(l),D=A(d);return D?(await D.setViewport({x:p.x??P.x,y:p.y??P.y,zoom:p.zoom??P.zoom},{duration:S==null?void 0:S.duration}),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>A(l),setCenter:async(p,S,P)=>{const D=typeof(P==null?void 0:P.zoom)<"u"?P.zoom:A(g),B=A(d);return B?(await B.setViewport({x:A(r)/2-p*D,y:A(i)/2-S*D,zoom:D},{duration:P==null?void 0:P.duration}),Promise.resolve(!0)):Promise.resolve(!1)},fitView:n,fitBounds:async(p,S)=>{const P=A(d);if(!P)return Promise.resolve(!1);const D=Ln(p,A(r),A(i),A(u),A(g),(S==null?void 0:S.padding)??.1);return await P.setViewport(D,{duration:S==null?void 0:S.duration}),Promise.resolve(!0)},getIntersectingNodes:(p,S=!0,P)=>{const D=ao(p),B=D?p:b(p);return B?(P||A(y)).filter(O=>{const Y=A(k).get(O.id);if(!Y||!D&&O.id===p.id)return!1;const I=Mt(Y),L=Bt(I,B);return S&&L>0||L>=B.width*B.height}):[]},isNodeIntersecting:(p,S,P=!0)=>{const B=ao(p)?p:b(p);if(!B)return!1;const O=Bt(B,S);return P&&O>0||O>=B.width*B.height},deleteElements:async({nodes:p=[],edges:S=[]})=>{const{nodes:P,edges:D}=await Oo({nodesToRemove:p,edgesToRemove:S,nodes:A(y),edges:A(h),onBeforeDelete:A(o)});return P&&y.update(B=>B.filter(O=>!P.some(({id:Y})=>Y===O.id))),D&&h.update(B=>B.filter(O=>!D.some(({id:Y})=>Y===O.id))),{deletedNodes:P,deletedEdges:D}},screenToFlowPosition:(p,S={snapToGrid:!0})=>{const P=A(w);if(!P)return p;const D=S.snapToGrid?A(s):!1,{x:B,y:O,zoom:Y}=A(l),{x:I,y:L}=P.getBoundingClientRect(),f={x:p.x-I,y:p.y-L};return Wt(f,[B,O,Y],D!==null,D||[1,1])},flowToScreenPosition:p=>{const S=A(w);if(!S)return p;const{x:P,y:D,zoom:B}=A(l),{x:O,y:Y}=S.getBoundingClientRect(),I=Ao(p,[P,D,B]);return{x:I.x+O,y:I.y+Y}},toObject:()=>({nodes:A(y).map(p=>({...p,position:{...p.position},data:{...p.data}})),edges:A(h).map(p=>({...p})),viewport:{...A(l)}}),updateNode:v,updateNodeData:(p,S,P)=>{var O;const D=(O=A(k).get(p))==null?void 0:O.internals.userNode;if(!D)return;const B=typeof S=="function"?S(D):S;D.data=P!=null&&P.replace?B:{...D.data,...B},y.update(Y=>Y)},getNodesBounds:p=>{const S=A(k),P=A(C);return $i(p,{nodeLookup:S,nodeOrigin:P})},getHandleConnections:({type:p,id:S,nodeId:P})=>{var D;return Array.from(((D=A(z).get(`${P}-${p}-${S??null}`))==null?void 0:D.values())??[])},viewport:l}}function zo(t,e){var o;const n=[];for(const s of e){const l=t.get(s);if(l){const r="internals"in l?(o=l.internals)==null?void 0:o.userNode:l;n.push(r)}}return n}function xl(){const{nodesInitialized:t}=Oe();return{subscribe:t.subscribe}}var pl=Ye('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg>');function _l(t,e){let n=c(e,"className",8,"size-4"),o=c(e,"strokeWidth",8,"1.5");var s=pl();be(()=>{le(s,"stroke-width",o()),Je(s,0,et(n()))}),J(t,s)}var kl=we('<div class="text-red-500 line-clamp-2 text-xs mt-0.5"> </div>'),El=we('<div class="text-gray-500 line-clamp-2 text-xs mt-0.5"> </div>'),Pl=we('<div class="flex w-full"><!> <div class="ml-2"><div class=" flex justify-between items-center"><div class="text-xs text-black dark:text-white font-medium line-clamp-1"> </div></div> <!></div></div>'),zl=we('<div class="text-red-500 line-clamp-2 text-xs mt-0.5"> </div>'),Cl=we('<div class="text-gray-500 line-clamp-2 text-xs mt-0.5"> </div>'),Sl=we('<div class="flex w-full"><!> <div class="ml-2"><div class=" flex justify-between items-center"><div class="text-xs text-black dark:text-white font-medium line-clamp-1"> </div> <button><!></button></div> <!></div></div>'),Ml=we('<div class="px-4 py-3 shadow-md rounded-xl dark:bg-black bg-white border dark:border-gray-900 w-60 h-20 group"><!> <!> <!></div>');function Nl(t,e){de(e,!1);const n=()=>Z(l,"$i18n",o),[o,s]=Xe(),l=zt("i18n");let r=c(e,"data",12);fe();var i=Ml(),u=ae(i);{let y=ce(()=>(E(r()),V(()=>{var h,w;return(w=(h=r())==null?void 0:h.message)!=null&&w.error?r().message.error.content:r().message.content})));Ni(u,{get content(){return a(y)},class:"w-full",allowHTML:!1,children:(h,w)=>{var k=st(),C=De(k);{var N=b=>{var v=Pl(),x=ae(v);{let I=ce(()=>(E(Ft),E(r()),V(()=>`${Ft}/users/${r().user.id}/profile/image`)));$n(x,{get src(){return a(I)},className:"size-5 -translate-y-[1px]"})}var p=me(x,2),S=ae(p),P=ae(S),D=ae(P,!0);se(P),se(S);var B=me(S,2);{var O=I=>{var L=kl(),f=ae(L,!0);se(L),be(()=>ot(f,(E(r()),V(()=>r().message.error.content)))),J(I,L)},Y=I=>{var L=El(),f=ae(L,!0);se(L),be(()=>ot(f,(E(r()),V(()=>r().message.content)))),J(I,L)};He(B,I=>{E(r()),V(()=>{var L,f;return(f=(L=r())==null?void 0:L.message)==null?void 0:f.error})?I(O):I(Y,!1)})}se(p),se(v),be(()=>ot(D,(E(r()),V(()=>{var I,L;return((L=(I=r())==null?void 0:I.user)==null?void 0:L.name)??"User"})))),J(b,v)},z=b=>{var v=Sl(),x=ae(v);{let f=ce(()=>(E(Ft),E(r()),n(),V(()=>{var M;return`${Ft}/models/model/profile/image?id=${((M=r().model)==null?void 0:M.id)??r().message.model}&lang=${n().language}`})));$n(x,{get src(){return a(f)},className:"size-5 -translate-y-[1px]"})}var p=me(x,2),S=ae(p),P=ae(S),D=ae(P,!0);se(P);var B=me(P,2),O=ae(B);{let f=ce(()=>(E(r()),V(()=>{var M,m;return(m=(M=r())==null?void 0:M.message)!=null&&m.favorite?"fill-red-500 stroke-red-500":"hover:fill-red-500 hover:stroke-red-500"})));Ti(O,{get className(){return`size-3 ${a(f)??""} `},strokeWidth:"2.5"})}se(B),se(S);var Y=me(S,2);{var I=f=>{var M=zl(),m=ae(M,!0);se(M),be(()=>ot(m,(E(r()),V(()=>r().message.error.content)))),J(f,M)},L=f=>{var M=Cl(),m=ae(M,!0);se(M),be(()=>ot(m,(E(r()),V(()=>r().message.content)))),J(f,M)};He(Y,f=>{E(r()),V(()=>{var M,m;return(m=(M=r())==null?void 0:M.message)==null?void 0:m.error})?f(I):f(L,!1)})}se(p),se(v),be(()=>{ot(D,(E(r()),V(()=>{var f,M,m,_;return((M=(f=r())==null?void 0:f.model)==null?void 0:M.name)??((_=(m=r())==null?void 0:m.message)==null?void 0:_.model)??"Assistant"}))),Je(B,1,et((E(r()),V(()=>{var f,M;return(M=(f=r())==null?void 0:f.message)!=null&&M.favorite?"":"invisible group-hover:visible"}))))}),_e("click",B,()=>{var f,M;r(r().message.favorite=!(((M=(f=r())==null?void 0:f.message)==null?void 0:M.favorite)??!1),!0)}),J(b,v)};He(C,b=>{E(r()),V(()=>r().message.role==="user")?b(N):b(z,!1)})}J(h,k)},$$slots:{default:!0}})}var g=me(u,2);Nt(g,{type:"target",get position(){return E(oe),V(()=>oe.Top)},class:"w-2 rounded-full dark:bg-gray-900"});var d=me(g,2);Nt(d,{type:"source",get position(){return E(oe),V(()=>oe.Bottom)},class:"w-2 rounded-full dark:bg-gray-900"}),se(i),J(t,i),ue(),s()}var Tl=Ye('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M22 3L2 3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 21L2 21" stroke-linecap="round" stroke-linejoin="round"></path><path d="M8 15V9C8 7.89543 8.89543 7 10 7H14C15.1046 7 16 7.89543 16 9V15C16 16.1046 15.1046 17 14 17H10C8.89543 17 8 16.1046 8 15Z"></path></svg>');function Il(t,e){let n=c(e,"className",8,"w-4 h-4"),o=c(e,"strokeWidth",8,"1.5");var s=Tl();be(()=>{Je(s,0,et(n())),le(s,"stroke-width",o())}),J(t,s)}var Ol=Ye('<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M3 22L3 2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M21 22V2" stroke-linecap="round" stroke-linejoin="round"></path><path d="M15 16H9C7.89543 16 7 15.1046 7 14V10C7 8.89543 7.89543 8 9 8H15C16.1046 8 17 8.89543 17 10V14C17 15.1046 16.1046 16 15 16Z"></path></svg>');function Hl(t,e){let n=c(e,"className",8,"w-4 h-4"),o=c(e,"strokeWidth",8,"1.5");var s=Ol();be(()=>{Je(s,0,et(n())),le(s,"stroke-width",o())}),J(t,s)}var Dl=we("<!> <!>",1),Al=we("<!> <!>",1);function Vl(t,e){de(e,!1);const n=()=>Z(Ci,"$theme",o),[o,s]=Xe(),l=bt();let r=c(e,"nodes",8),i=c(e,"nodeTypes",8),u=c(e,"edges",8),g=c(e,"setLayoutDirection",8);fe();{let d=ce(()=>(n(),V(()=>n().includes("dark")||n()==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")));qs(t,{get nodes(){return r()},get nodeTypes(){return i()},get edges(){return u()},fitView:!0,minZoom:.001,get colorMode(){return a(d)},nodesConnectable:!1,nodesDraggable:!1,oninit:()=>{},$$events:{nodeclick:y=>l("nodeclick",y.detail)},children:(y,h)=>{var w=Al(),k=De(w);ul(k,{showLock:!1,children:(N,z)=>{var b=Dl(),v=De(b);pt(v,{title:"Vertical Layout",$$events:{click:()=>g()("vertical")},children:(p,S)=>{Il(p,{className:"size-4"})},$$slots:{default:!0}});var x=me(v,2);pt(x,{title:"Horizontal Layout",$$events:{click:()=>g()("horizontal")},children:(p,S)=>{Hl(p,{className:"size-4"})},$$slots:{default:!0}}),J(N,b)},$$slots:{default:!0}});var C=me(k,2);bl(C,{get variant(){return E(ut),V(()=>ut.Dots)}}),J(y,w)},$$slots:{default:!0}})}ue(),s()}var Ll=we('<div class="w-full h-full relative"><div class=" absolute z-50 w-full flex justify-between dark:text-gray-100 px-4 py-3"><div class="flex items-center gap-2.5"><button class="self-center p-0.5"><!></button> <div class=" text-lg font-medium self-center font-primary"> </div></div> <button class="self-center p-0.5"><!></button></div> <!></div>');function Bl(t,e){de(e,!1);const n=()=>Z(Si,"$user",r),o=()=>Z(Mi,"$models",r),s=()=>Z(u,"$i18n",r),l=()=>Z(b,"$nodes",r),[r,i]=Xe();bt();const u=zt("i18n"),{width:g,height:d}=Oe(),{fitView:y,getViewport:h}=wl(),w=xl();let k=c(e,"history",8),C=c(e,"onClose",8),N=c(e,"onNodeClick",8),z=Q(null);const b=$([]),v=$([]);let x=Q("vertical");const p={custom:Nl},S=async()=>{a(z)===null?await y({nodes:[{id:k().currentId}]}):await y({nodes:[{id:a(z)}]}),j(z,null)},P=async X=>{const K=[],U=[],W=X==="vertical"?150:300,q=X==="vertical"?250:150;let te=new Map,ge={};Object.keys(k().messages).forEach(ie=>{var G;const re=k().messages[ie];if(!re)return;const F=re.parentId?(((G=te.get(re.parentId))==null?void 0:G.level)??-1)+1:0;ge[F]||(ge[F]=0),te.set(ie,{id:re.id,level:F,position:ge[F]++})}),Object.keys(k().messages).forEach(ie=>{const re=te.get(ie);if(!re)return;const F=X==="vertical"?re.position*q:re.level*W,G=X==="vertical"?re.level*W:re.position*q;K.push({id:re.id,type:"custom",data:{user:n(),message:k().messages[ie],model:o().find(Ee=>Ee.id===k().messages[ie].model)},position:{x:F,y:G}});const ne=k().messages[ie].parentId;ne&&U.push({id:ne+"-"+re.id,source:ne,target:re.id,selectable:!1,class:" dark:fill-gray-300 fill-gray-300",type:"smoothstep",animated:k().currentId===ie||D(ie,k().currentId)})}),await v.set([...U]),await b.set([...K])},D=(X,K)=>{const U=k().messages[X];return U.childrenIds&&U.childrenIds.some(W=>W===K||D(W,K))},B=X=>{j(x,X),P(a(x))};Rt(()=>{P(a(x)),w.subscribe(async X=>{X&&(await Pi(),await y({nodes:[{id:k().currentId}]}))}),g.subscribe(X=>{X&&y({nodes:[{id:k().currentId}]})}),d.subscribe(X=>{X&&y({nodes:[{id:k().currentId}]})})}),nn(()=>{b.set([]),v.set([])}),ee(()=>(E(k()),a(x)),()=>{k()&&P(a(x))}),ee(()=>E(k()),()=>{k()&&k().currentId&&S()}),We(),fe();var O=Ll(),Y=ae(O),I=ae(Y),L=ae(I),f=ae(L);_l(f,{className:"size-3.5"}),se(L);var M=me(L,2),m=ae(M,!0);se(M),se(I);var _=me(I,2),T=ae(_);Di(T,{className:"size-3.5"}),se(_),se(Y);var H=me(Y,2);{var R=X=>{Vl(X,{get nodes(){return b},get nodeTypes(){return p},get edges(){return v},setLayoutDirection:B,$$events:{nodeclick:K=>{N()(K.detail),j(z,K.detail.node.data.message.id),y({nodes:[{id:a(z)}]})}}})};He(H,X=>{l(),V(()=>l().length>0)&&X(R)})}se(O),be(X=>ot(m,X),[()=>(s(),V(()=>s().t("Chat Overview")))]),_e("click",L,()=>{Qn.set(!1)}),_e("click",_,()=>{C()(),Qn.set(!1)}),J(t,O),ue(),i()}function ha(t,e){de(e,!1),bt();let n=c(e,"history",8),o=c(e,"onClose",8),s=c(e,"onNodeClick",8);fe(),Js(t,{children:(l,r)=>{Bl(l,{get history(){return n()},get onClose(){return o()},get onNodeClick(){return s()}})},$$slots:{default:!0}}),ue()}export{ha as default};
//# sourceMappingURL=C4TofDr4.js.map
