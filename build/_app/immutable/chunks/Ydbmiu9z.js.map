{"version":3,"file":"Ydbmiu9z.js","sources":["../../../../../../src/lib/components/icons/ArrowUpTray.svelte","../../../../../../src/lib/components/chat/ModelSelector/ModelItemMenu.svelte","../../../../../../src/lib/components/icons/Tag.svelte","../../../../../../src/lib/components/chat/ModelSelector/ModelItem.svelte","../../../../../../src/lib/components/chat/ModelSelector/Selector.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\n\timport { getContext } from 'svelte';\n\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Pin from '$lib/components/icons/Pin.svelte';\n\timport PinSlash from '$lib/components/icons/PinSlash.svelte';\n\timport DocumentDuplicate from '$lib/components/icons/DocumentDuplicate.svelte';\n\timport Link from '$lib/components/icons/Link.svelte';\n\timport { settings } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\n\texport let show = false;\n\texport let model;\n\n\texport let pinModelHandler: (modelId: string) => void = () => {};\n\texport let copyLinkHandler: Function = () => {};\n\n\texport let onClose: Function = () => {};\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tcloseFocus={false}\n\tonOpenChange={(state) => {\n\t\tif (state === false) {\n\t\t\tonClose();\n\t\t}\n\t}}\n\ttypeahead={false}\n>\n\t<DropdownMenu.Trigger>\n\t\t<Tooltip\n\t\t\tcontent={$i18n.t('More')}\n\t\t\tclassName={($settings?.highContrastMode ?? false)\n\t\t\t\t? ''\n\t\t\t\t: 'group-hover/item:opacity-100 opacity-0'}\n\t\t>\n\t\t\t<slot />\n\t\t</Tooltip>\n\t</DropdownMenu.Trigger>\n\n\t<DropdownMenu.Content\n\t\tstrategy=\"fixed\"\n\t\tclass=\"w-full max-w-[180px] text-sm rounded-2xl p-1 z-[9999999] bg-white dark:bg-gray-850 dark:text-white shadow-lg border border-gray-100  dark:border-gray-800\"\n\t\tsideOffset={-2}\n\t\tside=\"bottom\"\n\t\talign=\"end\"\n\t\ttransition={flyAndScale}\n\t>\n\t\t<DropdownMenu.Item\n\t\t\ttype=\"button\"\n\t\t\taria-pressed={($settings?.pinnedModels ?? []).includes(model?.id)}\n\t\t\tclass=\"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2\"\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tpinModelHandler(model?.id);\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t{#if ($settings?.pinnedModels ?? []).includes(model?.id)}\n\t\t\t\t<PinSlash />\n\t\t\t{:else}\n\t\t\t\t<Pin />\n\t\t\t{/if}\n\n\t\t\t<div class=\"flex items-center\">\n\t\t\t\t{#if ($settings?.pinnedModels ?? []).includes(model?.id)}\n\t\t\t\t\t{$i18n.t('Hide from Sidebar')}\n\t\t\t\t{:else}\n\t\t\t\t\t{$i18n.t('Keep in Sidebar')}\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</DropdownMenu.Item>\n\n\t\t<DropdownMenu.Item\n\t\t\ttype=\"button\"\n\t\t\tclass=\"flex rounded-xl py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition items-center gap-2\"\n\t\t\ton:click={(e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tcopyLinkHandler();\n\t\t\t\tshow = false;\n\t\t\t}}\n\t\t>\n\t\t\t<Link />\n\n\t\t\t<div class=\"flex items-center\">{$i18n.t('Copy Link')}</div>\n\t\t</DropdownMenu.Item>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.8';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<!-- Tag body with pointed end -->\n\t<path d=\"M4 12 L8 7 H21 V17 H8 L4 12 Z\" stroke=\"currentColor\" fill=\"none\" />\n\n\t<!-- Tag hole -->\n\t<circle cx=\"10\" cy=\"12\" r=\"0.75\" fill=\"currentColor\" stroke=\"currentColor\" />\n</svg>\n","<script lang=\"ts\">\n\timport { marked } from 'marked';\n\n\timport { getContext, tick } from 'svelte';\n\timport dayjs from '$lib/dayjs';\n\n\timport { mobile, settings, user } from '$lib/stores';\n\timport { WEBUI_API_BASE_URL, WEBUI_BASE_URL } from '$lib/constants';\n\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport { copyToClipboard, sanitizeResponseContent } from '$lib/utils';\n\timport ArrowUpTray from '$lib/components/icons/ArrowUpTray.svelte';\n\timport Check from '$lib/components/icons/Check.svelte';\n\timport ModelItemMenu from './ModelItemMenu.svelte';\n\timport EllipsisHorizontal from '$lib/components/icons/EllipsisHorizontal.svelte';\n\timport { toast } from 'svelte-sonner';\n\timport Tag from '$lib/components/icons/Tag.svelte';\n\timport Label from '$lib/components/icons/Label.svelte';\n\n\tconst i18n = getContext('i18n');\n\n\texport let selectedModelIdx: number = -1;\n\texport let item: any = {};\n\texport let index: number = -1;\n\texport let value: string = '';\n\n\texport let unloadModelHandler: (modelValue: string) => void = () => {};\n\texport let pinModelHandler: (modelId: string) => void = () => {};\n\n\texport let onClick: () => void = () => {};\n\n\tconst copyLinkHandler = async (model) => {\n\t\tconst baseUrl = window.location.origin;\n\t\tconst res = await copyToClipboard(`${baseUrl}/?model=${encodeURIComponent(model.id)}`);\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Copied link to clipboard'));\n\t\t} else {\n\t\t\ttoast.error($i18n.t('Failed to copy link'));\n\t\t}\n\t};\n\n\tlet showMenu = false;\n</script>\n\n<button\n\taria-roledescription=\"model-item\"\n\taria-label={item.label}\n\tclass=\"flex group/item w-full text-left font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted {index ===\n\tselectedModelIdx\n\t\t? 'bg-gray-100 dark:bg-gray-800 group-hover:bg-transparent'\n\t\t: ''}\"\n\tdata-arrow-selected={index === selectedModelIdx}\n\tdata-value={item.value}\n\ton:click={() => {\n\t\tonClick();\n\t}}\n>\n\t<div class=\"flex flex-col flex-1 gap-1.5\">\n\t\t<!-- {#if (item?.model?.tags ?? []).length > 0}\n\t\t\t<div\n\t\t\t\tclass=\"flex gap-0.5 self-center items-start h-full w-full translate-y-[0.5px] overflow-x-auto scrollbar-none\"\n\t\t\t>\n\t\t\t\t{#each item.model?.tags.sort((a, b) => a.name.localeCompare(b.name)) as tag}\n\t\t\t\t\t<Tooltip content={tag.name} className=\"flex-shrink-0\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\" text-xs font-semibold px-1 rounded-sm uppercase bg-gray-500/20 text-gray-700 dark:text-gray-200\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{tag.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/each}\n\t\t\t</div>\n\t\t{/if} -->\n\n\t\t<div class=\"flex items-center gap-2\">\n\t\t\t<div class=\"flex items-center min-w-fit\">\n\t\t\t\t<Tooltip content={$user?.role === 'admin' ? (item?.value ?? '') : ''} placement=\"top-start\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/models/model/profile/image?id=${item.model.id}&lang=${$i18n.language}`}\n\t\t\t\t\t\talt=\"Model\"\n\t\t\t\t\t\tclass=\"rounded-full size-5 flex items-center\"\n\t\t\t\t\t\tloading=\"lazy\"\n\t\t\t\t\t/>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\n\t\t\t<div class=\"flex items-center\">\n\t\t\t\t<Tooltip content={`${item.label} (${item.value})`} placement=\"top-start\">\n\t\t\t\t\t<div class=\"line-clamp-1\">\n\t\t\t\t\t\t{item.label}\n\t\t\t\t\t</div>\n\t\t\t\t</Tooltip>\n\t\t\t</div>\n\n\t\t\t<div class=\" shrink-0 flex items-center gap-2\">\n\t\t\t\t{#if item.model.owned_by === 'ollama'}\n\t\t\t\t\t{#if (item.model.ollama?.details?.parameter_size ?? '') !== ''}\n\t\t\t\t\t\t<div class=\"flex items-center translate-y-[0.5px]\">\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tcontent={`${\n\t\t\t\t\t\t\t\t\titem.model.ollama?.details?.quantization_level\n\t\t\t\t\t\t\t\t\t\t? item.model.ollama?.details?.quantization_level + ' '\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}${\n\t\t\t\t\t\t\t\t\titem.model.ollama?.size\n\t\t\t\t\t\t\t\t\t\t? `(${(item.model.ollama?.size / 1024 ** 3).toFixed(1)}GB)`\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tclassName=\"self-end\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\" text-xs font-medium text-gray-600 dark:text-gray-400 line-clamp-1\"\n\t\t\t\t\t\t\t\t\t>{item.model.ollama?.details?.parameter_size ?? ''}</span\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t\t{#if item.model.ollama?.expires_at && new Date(item.model.ollama?.expires_at * 1000) > new Date()}\n\t\t\t\t\t\t<div class=\"flex items-center translate-y-[0.5px] px-0.5\">\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tcontent={`${$i18n.t('Unloads {{FROM_NOW}}', {\n\t\t\t\t\t\t\t\t\tFROM_NOW: dayjs(item.model.ollama?.expires_at * 1000).fromNow()\n\t\t\t\t\t\t\t\t})}`}\n\t\t\t\t\t\t\t\tclassName=\"self-end\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\" flex items-center\">\n\t\t\t\t\t\t\t\t\t<span class=\"relative flex size-2\">\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclass=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span class=\"relative inline-flex rounded-full size-2 bg-green-500\" />\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\n\t\t\t\t<!-- {JSON.stringify(item.info)} -->\n\n\t\t\t\t{#if (item?.model?.tags ?? []).length > 0}\n\t\t\t\t\t{#key item.model.id}\n\t\t\t\t\t\t<Tooltip elementId=\"tags-{item.model.id}\">\n\t\t\t\t\t\t\t<div slot=\"tooltip\" id=\"tags-{item.model.id}\">\n\t\t\t\t\t\t\t\t{#each item.model?.tags.sort((a, b) => a.name.localeCompare(b.name)) as tag}\n\t\t\t\t\t\t\t\t\t<Tooltip content={tag.name} className=\"flex-shrink-0\">\n\t\t\t\t\t\t\t\t\t\t<div class=\" text-xs font-medium rounded-sm uppercase text-white\">\n\t\t\t\t\t\t\t\t\t\t\t{tag.name}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"translate-y-[1px]\">\n\t\t\t\t\t\t\t\t<Tag />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t{/key}\n\t\t\t\t{/if}\n\n\t\t\t\t{#if item.model?.direct}\n\t\t\t\t\t<Tooltip content={`${$i18n.t('Direct')}`}>\n\t\t\t\t\t\t<div class=\"translate-y-[1px]\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"size-3\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M2 2.75A.75.75 0 0 1 2.75 2C8.963 2 14 7.037 14 13.25a.75.75 0 0 1-1.5 0c0-5.385-4.365-9.75-9.75-9.75A.75.75 0 0 1 2 2.75Zm0 4.5a.75.75 0 0 1 .75-.75 6.75 6.75 0 0 1 6.75 6.75.75.75 0 0 1-1.5 0C8 10.35 5.65 8 2.75 8A.75.75 0 0 1 2 7.25ZM3.5 11a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{:else if item.model.connection_type === 'external'}\n\t\t\t\t\t<Tooltip content={`${$i18n.t('External')}`}>\n\t\t\t\t\t\t<div class=\"translate-y-[1px]\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"size-3\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t\td=\"M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z\"\n\t\t\t\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\n\t\t\t\t{#if item.model?.info?.meta?.description}\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tcontent={`${marked.parse(\n\t\t\t\t\t\t\tsanitizeResponseContent(item.model?.info?.meta?.description).replaceAll('\\n', '<br>')\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\" translate-y-[1px]\">\n\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tstroke-width=\"1.5\"\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\td=\"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class=\"ml-auto pl-2 pr-1 flex items-center gap-1.5 shrink-0\">\n\t\t{#if $user?.role === 'admin' && item.model.owned_by === 'ollama' && item.model.ollama?.expires_at && new Date(item.model.ollama?.expires_at * 1000) > new Date()}\n\t\t\t<Tooltip\n\t\t\t\tcontent={`${$i18n.t('Eject')}`}\n\t\t\t\tclassName=\"flex-shrink-0 group-hover/item:opacity-100 opacity-0 \"\n\t\t\t>\n\t\t\t\t<button\n\t\t\t\t\tclass=\"flex\"\n\t\t\t\t\ton:click={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tunloadModelHandler(item.value);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ArrowUpTray className=\"size-3\" />\n\t\t\t\t</button>\n\t\t\t</Tooltip>\n\t\t{/if}\n\n\t\t<ModelItemMenu\n\t\t\tbind:show={showMenu}\n\t\t\tmodel={item.model}\n\t\t\t{pinModelHandler}\n\t\t\tcopyLinkHandler={() => {\n\t\t\t\tcopyLinkHandler(item.model);\n\t\t\t}}\n\t\t>\n\t\t\t<button\n\t\t\t\taria-label={`${$i18n.t('More Options')}`}\n\t\t\t\tclass=\"flex\"\n\t\t\t\ton:click={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tshowMenu = !showMenu;\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<EllipsisHorizontal />\n\t\t\t</button>\n\t\t</ModelItemMenu>\n\n\t\t{#if value === item.value}\n\t\t\t<div>\n\t\t\t\t<Check className=\"size-3\" />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</button>\n","<script lang=\"ts\">\n\timport { DropdownMenu } from 'bits-ui';\n\timport { marked } from 'marked';\n\timport Fuse from 'fuse.js';\n\n\timport dayjs from '$lib/dayjs';\n\timport relativeTime from 'dayjs/plugin/relativeTime';\n\tdayjs.extend(relativeTime);\n\n\timport Spinner from '$lib/components/common/Spinner.svelte';\n\timport { flyAndScale } from '$lib/utils/transitions';\n\timport { createEventDispatcher, onMount, getContext, tick } from 'svelte';\n\timport { goto } from '$app/navigation';\n\n\timport { deleteModel, getOllamaVersion, pullModel, unloadModel } from '$lib/apis/ollama';\n\n\timport {\n\t\tuser,\n\t\tMODEL_DOWNLOAD_POOL,\n\t\tmodels,\n\t\tmobile,\n\t\ttemporaryChatEnabled,\n\t\tsettings,\n\t\tconfig\n\t} from '$lib/stores';\n\timport { toast } from 'svelte-sonner';\n\timport { capitalizeFirstLetter, sanitizeResponseContent, splitStream } from '$lib/utils';\n\timport { getModels } from '$lib/apis';\n\n\timport ChevronDown from '$lib/components/icons/ChevronDown.svelte';\n\timport Check from '$lib/components/icons/Check.svelte';\n\timport Search from '$lib/components/icons/Search.svelte';\n\timport Tooltip from '$lib/components/common/Tooltip.svelte';\n\timport Switch from '$lib/components/common/Switch.svelte';\n\timport ChatBubbleOval from '$lib/components/icons/ChatBubbleOval.svelte';\n\n\timport ModelItem from './ModelItem.svelte';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let id = '';\n\texport let value = '';\n\texport let placeholder = $i18n.t('Select a model');\n\texport let searchEnabled = true;\n\texport let searchPlaceholder = $i18n.t('Search a model');\n\n\texport let items: {\n\t\tlabel: string;\n\t\tvalue: string;\n\t\tmodel: Model;\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t[key: string]: any;\n\t}[] = [];\n\n\texport let className = 'w-[32rem]';\n\texport let triggerClassName = 'text-lg';\n\n\texport let pinModelHandler: (modelId: string) => void = () => {};\n\n\tlet tagsContainerElement;\n\n\tlet show = false;\n\tlet tags = [];\n\n\tlet selectedModel = '';\n\t$: selectedModel = items.find((item) => item.value === value) ?? '';\n\n\tlet searchValue = '';\n\n\tlet selectedTag = '';\n\tlet selectedConnectionType = '';\n\n\tlet ollamaVersion = null;\n\tlet selectedModelIdx = 0;\n\n\tconst fuse = new Fuse(\n\t\titems.map((item) => {\n\t\t\tconst _item = {\n\t\t\t\t...item,\n\t\t\t\tmodelName: item.model?.name,\n\t\t\t\ttags: (item.model?.tags ?? []).map((tag) => tag.name).join(' '),\n\t\t\t\tdesc: item.model?.info?.meta?.description\n\t\t\t};\n\t\t\treturn _item;\n\t\t}),\n\t\t{\n\t\t\tkeys: ['value', 'tags', 'modelName'],\n\t\t\tthreshold: 0.4\n\t\t}\n\t);\n\n\tconst updateFuse = () => {\n\t\tif (fuse) {\n\t\t\tfuse.setCollection(\n\t\t\t\titems.map((item) => {\n\t\t\t\t\tconst _item = {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tmodelName: item.model?.name,\n\t\t\t\t\t\ttags: (item.model?.tags ?? []).map((tag) => tag.name).join(' '),\n\t\t\t\t\t\tdesc: item.model?.info?.meta?.description\n\t\t\t\t\t};\n\t\t\t\t\treturn _item;\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t};\n\n\t$: if (items) {\n\t\tupdateFuse();\n\t}\n\n\t$: filteredItems = (\n\t\tsearchValue\n\t\t\t? fuse\n\t\t\t\t\t.search(searchValue)\n\t\t\t\t\t.map((e) => {\n\t\t\t\t\t\treturn e.item;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((item) => {\n\t\t\t\t\t\tif (selectedTag === '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (item.model?.tags ?? [])\n\t\t\t\t\t\t\t.map((tag) => tag.name.toLowerCase())\n\t\t\t\t\t\t\t.includes(selectedTag.toLowerCase());\n\t\t\t\t\t})\n\t\t\t\t\t.filter((item) => {\n\t\t\t\t\t\tif (selectedConnectionType === '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (selectedConnectionType === 'local') {\n\t\t\t\t\t\t\treturn item.model?.connection_type === 'local';\n\t\t\t\t\t\t} else if (selectedConnectionType === 'external') {\n\t\t\t\t\t\t\treturn item.model?.connection_type === 'external';\n\t\t\t\t\t\t} else if (selectedConnectionType === 'direct') {\n\t\t\t\t\t\t\treturn item.model?.direct;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t: items\n\t\t\t\t\t.filter((item) => {\n\t\t\t\t\t\tif (selectedTag === '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (item.model?.tags ?? [])\n\t\t\t\t\t\t\t.map((tag) => tag.name.toLowerCase())\n\t\t\t\t\t\t\t.includes(selectedTag.toLowerCase());\n\t\t\t\t\t})\n\t\t\t\t\t.filter((item) => {\n\t\t\t\t\t\tif (selectedConnectionType === '') {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t} else if (selectedConnectionType === 'local') {\n\t\t\t\t\t\t\treturn item.model?.connection_type === 'local';\n\t\t\t\t\t\t} else if (selectedConnectionType === 'external') {\n\t\t\t\t\t\t\treturn item.model?.connection_type === 'external';\n\t\t\t\t\t\t} else if (selectedConnectionType === 'direct') {\n\t\t\t\t\t\t\treturn item.model?.direct;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t).filter((item) => !(item.model?.info?.meta?.hidden ?? false));\n\n\t$: if (selectedTag || selectedConnectionType) {\n\t\tresetView();\n\t} else {\n\t\tresetView();\n\t}\n\n\tconst resetView = async () => {\n\t\tawait tick();\n\n\t\tconst selectedInFiltered = filteredItems.findIndex((item) => item.value === value);\n\n\t\tif (selectedInFiltered >= 0) {\n\t\t\t// The selected model is visible in the current filter\n\t\t\tselectedModelIdx = selectedInFiltered;\n\t\t} else {\n\t\t\t// The selected model is not visible, default to first item in filtered list\n\t\t\tselectedModelIdx = 0;\n\t\t}\n\n\t\tawait tick();\n\t\tconst item = document.querySelector(`[data-arrow-selected=\"true\"]`);\n\t\titem?.scrollIntoView({ block: 'center', inline: 'nearest', behavior: 'instant' });\n\t};\n\n\tconst pullModelHandler = async () => {\n\t\tconst sanitizedModelTag = searchValue.trim().replace(/^ollama\\s+(run|pull)\\s+/, '');\n\n\t\tconsole.log($MODEL_DOWNLOAD_POOL);\n\t\tif ($MODEL_DOWNLOAD_POOL[sanitizedModelTag]) {\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t(`Model '{{modelTag}}' is already in queue for downloading.`, {\n\t\t\t\t\tmodelTag: sanitizedModelTag\n\t\t\t\t})\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (Object.keys($MODEL_DOWNLOAD_POOL).length === 3) {\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t('Maximum of 3 models can be downloaded simultaneously. Please try again later.')\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst [res, controller] = await pullModel(localStorage.token, sanitizedModelTag, '0').catch(\n\t\t\t(error) => {\n\t\t\t\ttoast.error(`${error}`);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\n\t\tif (res) {\n\t\t\tconst reader = res.body\n\t\t\t\t.pipeThrough(new TextDecoderStream())\n\t\t\t\t.pipeThrough(splitStream('\\n'))\n\t\t\t\t.getReader();\n\n\t\t\tMODEL_DOWNLOAD_POOL.set({\n\t\t\t\t...$MODEL_DOWNLOAD_POOL,\n\t\t\t\t[sanitizedModelTag]: {\n\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\n\t\t\t\t\tabortController: controller,\n\t\t\t\t\treader,\n\t\t\t\t\tdone: false\n\t\t\t\t}\n\t\t\t});\n\n\t\t\twhile (true) {\n\t\t\t\ttry {\n\t\t\t\t\tconst { value, done } = await reader.read();\n\t\t\t\t\tif (done) break;\n\n\t\t\t\t\tlet lines = value.split('\\n');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\t\tlet data = JSON.parse(line);\n\t\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\t\tif (data.error) {\n\t\t\t\t\t\t\t\tthrow data.error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (data.detail) {\n\t\t\t\t\t\t\t\tthrow data.detail;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (data.status) {\n\t\t\t\t\t\t\t\tif (data.digest) {\n\t\t\t\t\t\t\t\t\tlet downloadProgress = 0;\n\t\t\t\t\t\t\t\t\tif (data.completed) {\n\t\t\t\t\t\t\t\t\t\tdownloadProgress = Math.round((data.completed / data.total) * 1000) / 10;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdownloadProgress = 100;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tMODEL_DOWNLOAD_POOL.set({\n\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL,\n\t\t\t\t\t\t\t\t\t\t[sanitizedModelTag]: {\n\t\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\n\t\t\t\t\t\t\t\t\t\t\tpullProgress: downloadProgress,\n\t\t\t\t\t\t\t\t\t\t\tdigest: data.digest\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\ttoast.success(data.status);\n\n\t\t\t\t\t\t\t\t\tMODEL_DOWNLOAD_POOL.set({\n\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL,\n\t\t\t\t\t\t\t\t\t\t[sanitizedModelTag]: {\n\t\t\t\t\t\t\t\t\t\t\t...$MODEL_DOWNLOAD_POOL[sanitizedModelTag],\n\t\t\t\t\t\t\t\t\t\t\tdone: data.status === 'success'\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t\tif (typeof error !== 'string') {\n\t\t\t\t\t\terror = error.message;\n\t\t\t\t\t}\n\n\t\t\t\t\ttoast.error(`${error}`);\n\t\t\t\t\t// opts.callback({ success: false, error, modelName: opts.modelName });\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($MODEL_DOWNLOAD_POOL[sanitizedModelTag].done) {\n\t\t\t\ttoast.success(\n\t\t\t\t\t$i18n.t(`Model '{{modelName}}' has been successfully downloaded.`, {\n\t\t\t\t\t\tmodelName: sanitizedModelTag\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\tmodels.set(\n\t\t\t\t\tawait getModels(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttoast.error($i18n.t('Download canceled'));\n\t\t\t}\n\n\t\t\tdelete $MODEL_DOWNLOAD_POOL[sanitizedModelTag];\n\n\t\t\tMODEL_DOWNLOAD_POOL.set({\n\t\t\t\t...$MODEL_DOWNLOAD_POOL\n\t\t\t});\n\t\t}\n\t};\n\n\tconst setOllamaVersion = async () => {\n\t\tollamaVersion = await getOllamaVersion(localStorage.token).catch((error) => false);\n\t};\n\n\tonMount(async () => {\n\t\tif (items) {\n\t\t\ttags = items\n\t\t\t\t.filter((item) => !(item.model?.info?.meta?.hidden ?? false))\n\t\t\t\t.flatMap((item) => item.model?.tags ?? [])\n\t\t\t\t.map((tag) => tag.name.toLowerCase());\n\t\t\t// Remove duplicates and sort\n\t\t\ttags = Array.from(new Set(tags)).sort((a, b) => a.localeCompare(b));\n\t\t}\n\t});\n\n\t$: if (show) {\n\t\tsetOllamaVersion();\n\t}\n\n\tconst cancelModelPullHandler = async (model: string) => {\n\t\tconst { reader, abortController } = $MODEL_DOWNLOAD_POOL[model];\n\t\tif (abortController) {\n\t\t\tabortController.abort();\n\t\t}\n\t\tif (reader) {\n\t\t\tawait reader.cancel();\n\t\t\tdelete $MODEL_DOWNLOAD_POOL[model];\n\t\t\tMODEL_DOWNLOAD_POOL.set({\n\t\t\t\t...$MODEL_DOWNLOAD_POOL\n\t\t\t});\n\t\t\tawait deleteModel(localStorage.token, model);\n\t\t\ttoast.success($i18n.t('{{model}} download has been canceled', { model: model }));\n\t\t}\n\t};\n\n\tconst unloadModelHandler = async (model: string) => {\n\t\tconst res = await unloadModel(localStorage.token, model).catch((error) => {\n\t\t\ttoast.error($i18n.t('Error unloading model: {{error}}', { error }));\n\t\t});\n\n\t\tif (res) {\n\t\t\ttoast.success($i18n.t('Model unloaded successfully'));\n\t\t\tmodels.set(\n\t\t\t\tawait getModels(\n\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n</script>\n\n<DropdownMenu.Root\n\tbind:open={show}\n\tonOpenChange={async () => {\n\t\tsearchValue = '';\n\t\twindow.setTimeout(() => document.getElementById('model-search-input')?.focus(), 0);\n\n\t\tresetView();\n\t}}\n\tcloseFocus={false}\n>\n\t<DropdownMenu.Trigger\n\t\tclass=\"relative w-full {($settings?.highContrastMode ?? false)\n\t\t\t? ''\n\t\t\t: 'outline-hidden focus:outline-hidden'}\"\n\t\taria-label={placeholder}\n\t\tid=\"model-selector-{id}-button\"\n\t>\n\t\t<div\n\t\t\tclass=\"flex w-full text-left px-0.5 bg-transparent truncate {triggerClassName} justify-between {($settings?.highContrastMode ??\n\t\t\tfalse)\n\t\t\t\t? 'dark:placeholder-gray-100 placeholder-gray-800'\n\t\t\t\t: 'placeholder-gray-400'}\"\n\t\t\ton:mouseenter={async () => {\n\t\t\t\tmodels.set(\n\t\t\t\t\tawait getModels(\n\t\t\t\t\t\tlocalStorage.token,\n\t\t\t\t\t\t$config?.features?.enable_direct_connections && ($settings?.directConnections ?? null)\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}}\n\t\t>\n\t\t\t{#if selectedModel}\n\t\t\t\t{selectedModel.label}\n\t\t\t{:else}\n\t\t\t\t{placeholder}\n\t\t\t{/if}\n\t\t\t<ChevronDown className=\" self-center ml-2 size-3\" strokeWidth=\"2.5\" />\n\t\t</div>\n\t</DropdownMenu.Trigger>\n\n\t<DropdownMenu.Content\n\t\tclass=\" z-40 {$mobile\n\t\t\t? `w-full`\n\t\t\t: `${className}`} max-w-[calc(100vw-1rem)] justify-start rounded-2xl  bg-white dark:bg-gray-850 dark:text-white shadow-lg  outline-hidden\"\n\t\ttransition={flyAndScale}\n\t\tside={$mobile ? 'bottom' : 'bottom-start'}\n\t\tsideOffset={2}\n\t\talignOffset={-1}\n\t>\n\t\t<slot>\n\t\t\t{#if searchEnabled}\n\t\t\t\t<div class=\"flex items-center gap-2.5 px-4.5 mt-3.5 mb-1.5\">\n\t\t\t\t\t<Search className=\"size-4\" strokeWidth=\"2.5\" />\n\n\t\t\t\t\t<input\n\t\t\t\t\t\tid=\"model-search-input\"\n\t\t\t\t\t\tbind:value={searchValue}\n\t\t\t\t\t\tclass=\"w-full text-sm bg-transparent outline-hidden\"\n\t\t\t\t\t\tplaceholder={searchPlaceholder}\n\t\t\t\t\t\tautocomplete=\"off\"\n\t\t\t\t\t\taria-label={$i18n.t('Search In Models')}\n\t\t\t\t\t\ton:keydown={(e) => {\n\t\t\t\t\t\t\tif (e.code === 'Enter' && filteredItems.length > 0) {\n\t\t\t\t\t\t\t\tvalue = filteredItems[selectedModelIdx].value;\n\t\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t\t\treturn; // dont need to scroll on selection\n\t\t\t\t\t\t\t} else if (e.code === 'ArrowDown') {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tselectedModelIdx = Math.min(selectedModelIdx + 1, filteredItems.length - 1);\n\t\t\t\t\t\t\t} else if (e.code === 'ArrowUp') {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tselectedModelIdx = Math.max(selectedModelIdx - 1, 0);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// if the user types something, reset to the top selection.\n\t\t\t\t\t\t\t\tselectedModelIdx = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst item = document.querySelector(`[data-arrow-selected=\"true\"]`);\n\t\t\t\t\t\t\titem?.scrollIntoView({ block: 'center', inline: 'nearest', behavior: 'instant' });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class=\"px-2\">\n\t\t\t\t{#if tags && items.filter((item) => !(item.model?.info?.meta?.hidden ?? false)).length > 0}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\" flex w-full bg-white dark:bg-gray-850 overflow-x-auto scrollbar-none font-[450] mb-0.5\"\n\t\t\t\t\t\ton:wheel={(e) => {\n\t\t\t\t\t\t\tif (e.deltaY !== 0) {\n\t\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\t\te.currentTarget.scrollLeft += e.deltaY;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"flex gap-1 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap\"\n\t\t\t\t\t\t\tbind:this={tagsContainerElement}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{#if items.find((item) => item.model?.connection_type === 'local') || items.find((item) => item.model?.connection_type === 'external') || items.find((item) => item.model?.direct) || tags.length > 0}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"min-w-fit outline-none px-1.5 py-0.5 {selectedTag === '' &&\n\t\t\t\t\t\t\t\t\tselectedConnectionType === ''\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition capitalize\"\n\t\t\t\t\t\t\t\t\taria-pressed={selectedTag === '' && selectedConnectionType === ''}\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tselectedConnectionType = '';\n\t\t\t\t\t\t\t\t\t\tselectedTag = '';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('All')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if items.find((item) => item.model?.connection_type === 'local')}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"min-w-fit outline-none px-1.5 py-0.5 {selectedConnectionType === 'local'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition capitalize\"\n\t\t\t\t\t\t\t\t\taria-pressed={selectedConnectionType === 'local'}\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tselectedTag = '';\n\t\t\t\t\t\t\t\t\t\tselectedConnectionType = 'local';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Local')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if items.find((item) => item.model?.connection_type === 'external')}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"min-w-fit outline-none px-1.5 py-0.5 {selectedConnectionType === 'external'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition capitalize\"\n\t\t\t\t\t\t\t\t\taria-pressed={selectedConnectionType === 'external'}\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tselectedTag = '';\n\t\t\t\t\t\t\t\t\t\tselectedConnectionType = 'external';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('External')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if items.find((item) => item.model?.direct)}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"min-w-fit outline-none px-1.5 py-0.5 {selectedConnectionType === 'direct'\n\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t: 'text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition capitalize\"\n\t\t\t\t\t\t\t\t\taria-pressed={selectedConnectionType === 'direct'}\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tselectedTag = '';\n\t\t\t\t\t\t\t\t\t\tselectedConnectionType = 'direct';\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{$i18n.t('Direct')}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#each tags as tag}\n\t\t\t\t\t\t\t\t<Tooltip content={tag}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclass=\"min-w-fit outline-none px-1.5 py-0.5 {selectedTag === tag\n\t\t\t\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t\t\t\t: 'text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition capitalize\"\n\t\t\t\t\t\t\t\t\t\taria-pressed={selectedTag === tag}\n\t\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\t\tselectedConnectionType = '';\n\t\t\t\t\t\t\t\t\t\t\tselectedTag = tag;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{tag.length > 16 ? `${tag.slice(0, 16)}...` : tag}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{/each}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</div>\n\n\t\t\t<div class=\"px-2.5 max-h-64 overflow-y-auto group relative\">\n\t\t\t\t{#each filteredItems as item, index}\n\t\t\t\t\t<ModelItem\n\t\t\t\t\t\t{selectedModelIdx}\n\t\t\t\t\t\t{item}\n\t\t\t\t\t\t{index}\n\t\t\t\t\t\t{value}\n\t\t\t\t\t\t{pinModelHandler}\n\t\t\t\t\t\t{unloadModelHandler}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tvalue = item.value;\n\t\t\t\t\t\t\tselectedModelIdx = index;\n\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t<div class=\"block px-3 py-2 text-sm text-gray-700 dark:text-gray-100\">\n\t\t\t\t\t\t\t{$i18n.t('No results found')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\n\t\t\t\t{#if !(searchValue.trim() in $MODEL_DOWNLOAD_POOL) && searchValue && ollamaVersion && $user?.role === 'admin'}\n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tcontent={$i18n.t(`Pull \"{{searchValue}}\" from Ollama.com`, {\n\t\t\t\t\t\t\tsearchValue: searchValue\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tplacement=\"top-start\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"flex w-full font-medium line-clamp-1 select-none items-center rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-xl cursor-pointer data-highlighted:bg-muted\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tpullModelHandler();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\" truncate\">\n\t\t\t\t\t\t\t\t{$i18n.t(`Pull \"{{searchValue}}\" from Ollama.com`, { searchValue: searchValue })}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t{/if}\n\n\t\t\t\t{#each Object.keys($MODEL_DOWNLOAD_POOL) as model}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex w-full justify-between font-medium select-none rounded-button py-2 pl-3 pr-1.5 text-sm text-gray-700 dark:text-gray-100 outline-hidden transition-all duration-75 rounded-xl cursor-pointer data-highlighted:bg-muted\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"flex\">\n\t\t\t\t\t\t\t<div class=\"mr-2.5 translate-y-0.5\">\n\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"flex flex-col self-start\">\n\t\t\t\t\t\t\t\t<div class=\"flex gap-1\">\n\t\t\t\t\t\t\t\t\t<div class=\"line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\tDownloading \"{model}\"\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"shrink-0\">\n\t\t\t\t\t\t\t\t\t\t{'pullProgress' in $MODEL_DOWNLOAD_POOL[model]\n\t\t\t\t\t\t\t\t\t\t\t? `(${$MODEL_DOWNLOAD_POOL[model].pullProgress}%)`\n\t\t\t\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{#if 'digest' in $MODEL_DOWNLOAD_POOL[model] && $MODEL_DOWNLOAD_POOL[model].digest}\n\t\t\t\t\t\t\t\t\t<div class=\"-mt-1 h-fit text-[0.7rem] dark:text-gray-500 line-clamp-1\">\n\t\t\t\t\t\t\t\t\t\t{$MODEL_DOWNLOAD_POOL[model].digest}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"mr-2 ml-1 translate-y-0.5\">\n\t\t\t\t\t\t\t<Tooltip content={$i18n.t('Cancel')}>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclass=\"text-gray-800 dark:text-gray-100\"\n\t\t\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\t\t\tcancelModelPullHandler(model);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclass=\"w-4 h-4 text-gray-800 dark:text-white\"\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linecap=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-linejoin=\"round\"\n\t\t\t\t\t\t\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M6 18 17.94 6M18 18 6.06 6\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t{/each}\n\t\t\t</div>\n\n\t\t\t<div class=\"mb-2.5\"></div>\n\n\t\t\t<div class=\"hidden w-[42rem]\" />\n\t\t\t<div class=\"hidden w-[32rem]\" />\n\t\t</slot>\n\t</DropdownMenu.Content>\n</DropdownMenu.Root>\n"],"names":["className","strokeWidth","i18n","getContext","show","model","$.prop","$$props","pinModelHandler","copyLinkHandler","onClose","state","$$value","$i18n","$.untrack","_a","$settings","flyAndScale","_b","e","selectedModelIdx","item","index","value","unloadModelHandler","onClick","baseUrl","copyToClipboard","toast","showMenu","$user","WEBUI_API_BASE_URL","_d","_c","_e","_f","dayjs","$.key","node_8","$.deep_read_state","$$anchor","a","b","tag","$.get","$.template_effect","$.set_attribute","div_10","marked","sanitizeResponseContent","$.event","button_1","button_2","$.set","$.set_class","button","relativeTime","createEventDispatcher","id","placeholder","searchEnabled","searchPlaceholder","items","triggerClassName","tagsContainerElement","$.mutable_source","tags","selectedModel","searchValue","selectedTag","selectedConnectionType","ollamaVersion","fuse","Fuse","updateFuse","resetView","tick","selectedInFiltered","filteredItems","pullModelHandler","sanitizedModelTag","$MODEL_DOWNLOAD_POOL","res","controller","pullModel","error","reader","splitStream","MODEL_DOWNLOAD_POOL","done","lines","line","data","downloadProgress","models","getModels","$config","setOllamaVersion","getOllamaVersion","onMount","cancelModelPullHandler","abortController","deleteModel","unloadModel","$$render","consequent","alternate","div","$0","$.derived_safe_equal","$mobile","$.bind_value","input","consequent_1","button_3","$.each","node_12","button_4","$.bind_this","div_4","div_3","button_5","button_6"],"mappings":"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"}